<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="kevin.xi" />
        <meta name="copyright" content="kevin.xi" />

<meta name="keywords" content="java, jvm, guava, java, " />
        <title>JAVA8 Guava  · 寒玉 Blog
</title>
        <!-- <link href="http://cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css"> -->
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="/theme/css/style.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/solarizedlight.css" media="screen">
        <link rel="shortcut icon" href="/theme/images/favicon.ico" type="image/x-icon" />
        <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon.png" />
        <link rel="apple-touch-icon" sizes="57x57" href="/theme/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="/theme/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="/theme/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="/theme/images/apple-touch-icon-144x144.png" />
        <link rel="icon" href="/theme/images/apple-touch-icon-144x144.png" />
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="/"><span class=site-name>寒玉 Blog</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="">Home</a></li>
                            <li ><a href="/pages/books-date-2017-12-05-1130-ch.html">Books</a></li>
                            <li ><a href="/pages/about-date-2015-05-10-1010-ch.html">About Me</a></li>
                            <li ><a href="/categories.html">Categories</a></li>
                            <li ><a href="/tags.html">Tags</a></li>
                            <li ><a href="/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page_header span10 offset2">
    <h1><a href="/java-8-guava-date-2017-12-28-1846-ch.html"> JAVA8 Guava  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            <hr>
<blockquote>
<p>Guava 是一个 Google 的基于java1.6的类库集合的扩展项目，包括 collections, caching, primitives support, concurrency libraries, common annotations, string processing, I/O, 等等. 这些高质量的 API 可以使你的JAVa代码更加优雅，更加简洁，让你工作更加轻松愉悦。</p>
</blockquote>
<h1>项目相关信息：</h1>
<ul>
<li>官方首页：http://code.google.com/p/guava-libraries</li>
<li>官方下载：http://code.google.com/p/guava-libraries/downloads/list</li>
<li>官方文档：http://docs.guava-libraries.googlecode.com/git/javadoc</li>
<li>http://www.ostools.net/apidocs/apidoc?api=guava</li>
</ul>
<p>源码包的简单说明：</p>
<ul>
<li>com.google.common.annotations：普通注解类型。</li>
<li>com.google.common.base：基本工具类库和接口。</li>
<li>com.google.common.cache：缓存工具包，非常简单易用且功能强大的JVM内缓存。</li>
<li>com.google.common.collect：带泛型的集合接口扩展和实现，以及工具类，这里你会发现很多好玩的集合。</li>
<li>com.google.common.eventbus：发布订阅风格的事件总线。</li>
<li>com.google.common.hash： 哈希工具包。</li>
<li>com.google.common.io：I/O工具包。</li>
<li>com.google.common.math：原始算术类型和超大数的运算工具包。</li>
<li>com.google.common.net：网络工具包。</li>
<li>com.google.common.primitives：八种原始类型和无符号类型的静态工具包。</li>
<li>com.google.common.reflect：反射工具包。</li>
<li>com.google.common.util.concurrent：多线程工具包。</li>
</ul>
<h1>类库使用手册</h1>
<p>一.  基本工具类：</p>
<ol>
<li>使用和避免 null：null 有语言歧义， 会产生令人费解的错误， 反正他总是让人不爽。很多 Guava 的工具类在遇到 null 时会直接拒绝或出错，而不是默默地接受他们。</li>
<li>前提条件：更容易的对你的方法进行前提条件的测试。</li>
<li>常见的对象方法： 简化了Object常用方法的实现， 如 hashCode() 和 toString()。</li>
<li>排序： Guava 强大的 "fluent Comparator"比较器， 提供多关键字排序。</li>
<li>Throwable类： 简化了异常检查和错误传播。</li>
</ol>
<p>二.  集合类：集合类库是 Guava 对 JDK 集合类的扩展， 这是 Guava 项目最完善和为人所知的部分。</p>
<ol>
<li>Immutable collections（不变的集合）： 防御性编程， 不可修改的集合，并且提高了效率。</li>
<li>New collection types(新集合类型)：JDK collections 没有的一些集合类型，主要有：multisets，multimaps，tables， bidirectional maps等等</li>
<li>Powerful collection utilities（强大的集合工具类）： java.util.Collections 中未包含的常用操作工具类</li>
<li>Extension utilities（扩展工具类）: 给 Collection 对象添加一个装饰器? 实现迭代器? 我们可以更容易使用这些方法。</li>
</ol>
<p>三.  缓存: 本地缓存，可以很方便的操作缓存对象，并且支持各种缓存失效行为模式。</p>
<p>四.  Functional idioms（函数式）: 简洁, Guava实现了Java的函数式编程，可以显著简化代码。</p>
<p>五. Concurrency（并发）：强大,简单的抽象,让我们更容易实现简单正确的并发性代码。</p>
<ol>
<li>ListenableFuture（可监听的Future）: Futures,用于异步完成的回调。
　　</li>
<li>Service: 控制事件的启动和关闭，为你管理复杂的状态逻辑。</li>
</ol>
<p>六. Strings: 一个非常非常有用的字符串工具类: 提供 splitting，joining， padding 等操作。</p>
<p>七. Primitives: 扩展 JDK 中未提供的对原生类型（如int、char等）的操作， 包括某些类型的无符号的变量。</p>
<p>八. Ranges: Guava 一个强大的 API，提供 Comparable 类型的范围处理， 包括连续和离散的情况。</p>
<p>九. I/O: 简化 I/O 操作, 特别是对 I/O 流和文件的操作, for Java 5 and 6.</p>
<p>十. Hashing: 提供比 Object.hashCode() 更复杂的 hash 方法, 提供 Bloom filters.</p>
<p>十一. EventBus: 基于发布-订阅模式的组件通信，但是不需要明确地注册在委托对象中。</p>
<p>十二. Math: 优化的 math 工具类，经过完整测试。</p>
<p>十三. Reflection: Guava 的 Java 反射机制工具类。</p>
<h1>Optional</h1>
<p>大多数情况下开发人员使用null表示是目中缺失情况,可能是已经有一个默认值,或者没有值,或者找不到值.例如,Map.get返回null就表示找不到给定键对应的值</p>
<p>Guava用Optional<T>表示可能为null的T类型引用。一个Optional实例可能包含非null的引用（我们称之为引用存在），也可能什么也不包括（称之为引用缺失）。它从不说包含的是null值，而是用存在或缺失来表示。但Optional从不会包含null值引用。</p>
<div class="highlight"><pre><span></span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">possible</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
<span class="n">possible</span><span class="o">.</span><span class="na">isPresent</span><span class="o">();</span>
<span class="n">possible</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
</pre></div>


<h2>创建Optional实例</h2>
<table>
<thead>
<tr>
<th align="left">method</th>
<th align="left">note</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Optional.of(T)</td>
<td align="left">创建指定引用的Optional实例,如果引用为null,则迅速失败</td>
</tr>
<tr>
<td align="left">Optional.absent()</td>
<td align="left">创建引用缺失的Optional实例</td>
</tr>
<tr>
<td align="left">Optional.fromNullable(T)</td>
<td align="left">创建指定引用的Optional实例,若引用为null则表示缺失</td>
</tr>
</tbody>
</table>
<h2>用Optional实例查询引用</h2>
<table>
<thead>
<tr>
<th align="left">method</th>
<th align="left">note</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">boolean isPresent()</td>
<td align="left">如果Optional包含非null的引用,返回true</td>
</tr>
<tr>
<td align="left">T get()</td>
<td align="left">返回Optional所包含的引用,若引用缺失则抛出java.lang.IllegalStateException</td>
</tr>
<tr>
<td align="left">T or(T)</td>
<td align="left">返回Optional所包含的引用,若引用缺失则返回指定的值</td>
</tr>
<tr>
<td align="left">T orNull()</td>
<td align="left">返回Optional所包含的引用,若引用缺失则返回null</td>
</tr>
<tr>
<td align="left">Set<T> asSet()</td>
<td align="left">返回Optional所包含的引用的单例不可变集,如果引用存在只有单一元素的集合,如果引用缺失,返回一个空集合</td>
</tr>
</tbody>
</table>
<blockquote>
<p>好的做法是积极地把null和空区分开，以表示不同的含义，在代码中把null和空同等对待是一种令人不安的坏味道</p>
</blockquote>
<h2>Guava – Preconditions</h2>
<p>Guava Preconditions类中提供了若干前置条件判断的实用方法,建议使用</p>
<table>
<thead>
<tr>
<th align="left">方法声明（不包括额外参数)</th>
<th align="left">描述</th>
<th align="left">检查失败时抛出的异常</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">checkArgument(boolean)</td>
<td align="left">检查boolean是否为true，用来检查传递给方法的参数。</td>
<td align="left">IllegalArgumentException</td>
</tr>
<tr>
<td align="left">checkNotNull(T)</td>
<td align="left">检查value是否为null，该方法直接返回value，因此可以内嵌使用checkNotNull。</td>
<td align="left">NullPointerException</td>
</tr>
<tr>
<td align="left">checkState(boolean)</td>
<td align="left">用来检查对象的某些状态。</td>
<td align="left">IllegalStateException</td>
</tr>
<tr>
<td align="left">checkElementIndex(int index, int size)</td>
<td align="left">检查index作为索引值对某个列表、字符串或数组是否有效。index&gt;=0 &amp;&amp; index&lt;size *</td>
<td align="left">IndexOutOfBoundsException</td>
</tr>
<tr>
<td align="left">checkPositionIndex(int index, int size)</td>
<td align="left">检查index作为位置值对某个列表、字符串或数组是否有效。index&gt;=0 &amp;&amp; index&lt;=size *</td>
<td align="left">IndexOutOfBoundsException</td>
</tr>
<tr>
<td align="left">checkPositionIndexes(int start, int end, int size)</td>
<td align="left">检查[start, end]表示的位置范围对某个列表、字符串或数组是否有效*</td>
<td align="left">IndexOutOfBoundsException</td>
</tr>
</tbody>
</table>
<h2>Guava – Maps</h2>
<h3>Create Map</h3>
<div class="highlight"><pre><span></span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">aNewMap</span> <span class="o">=</span> <span class="n">Maps</span><span class="o">.</span><span class="na">newHashMap</span><span class="o">();</span>
</pre></div>


<h3>ImmutableMap</h3>
<div class="highlight"><pre><span></span><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">whenCreatingImmutableMap_thenCorrect</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">salary</span> <span class="o">=</span> <span class="n">ImmutableMap</span><span class="o">.&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">builder</span><span class="o">()</span>
      <span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;John&quot;</span><span class="o">,</span> <span class="mi">1000</span><span class="o">)</span>
      <span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;Jane&quot;</span><span class="o">,</span> <span class="mi">1500</span><span class="o">)</span>
      <span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;Adam&quot;</span><span class="o">,</span> <span class="mi">2000</span><span class="o">)</span>
      <span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;Tom&quot;</span><span class="o">,</span> <span class="mi">2000</span><span class="o">)</span>
      <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mi">1000</span><span class="o">,</span> <span class="n">salary</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;John&quot;</span><span class="o">).</span><span class="na">intValue</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mi">2000</span><span class="o">,</span> <span class="n">salary</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;Tom&quot;</span><span class="o">).</span><span class="na">intValue</span><span class="o">());</span>
<span class="o">}</span>
</pre></div>


<h3>SortedMap</h3>
<div class="highlight"><pre><span></span><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">whenUsingSortedMap_thenKeysAreSorted</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">ImmutableSortedMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">salary</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ImmutableSortedMap</span>
      <span class="o">.</span><span class="na">Builder</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;(</span><span class="n">Ordering</span><span class="o">.</span><span class="na">natural</span><span class="o">())</span>
      <span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;John&quot;</span><span class="o">,</span> <span class="mi">1000</span><span class="o">)</span>
      <span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;Jane&quot;</span><span class="o">,</span> <span class="mi">1500</span><span class="o">)</span>
      <span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;Adam&quot;</span><span class="o">,</span> <span class="mi">2000</span><span class="o">)</span>
      <span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;Tom&quot;</span><span class="o">,</span> <span class="mi">2000</span><span class="o">)</span>
      <span class="o">.</span><span class="na">build</span><span class="o">();</span>

    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;Adam&quot;</span><span class="o">,</span> <span class="n">salary</span><span class="o">.</span><span class="na">firstKey</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mi">2000</span><span class="o">,</span> <span class="n">salary</span><span class="o">.</span><span class="na">lastEntry</span><span class="o">().</span><span class="na">getValue</span><span class="o">().</span><span class="na">intValue</span><span class="o">());</span>
<span class="o">}</span>
</pre></div>


<h3>BiMap</h3>
<div class="highlight"><pre><span></span><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">whenCreateBiMap_thenCreated</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">BiMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">words</span> <span class="o">=</span> <span class="n">HashBiMap</span><span class="o">.</span><span class="na">create</span><span class="o">();</span>
    <span class="n">words</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;First&quot;</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
    <span class="n">words</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;Second&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
    <span class="n">words</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;Third&quot;</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">words</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;Second&quot;</span><span class="o">).</span><span class="na">intValue</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;Third&quot;</span><span class="o">,</span> <span class="n">words</span><span class="o">.</span><span class="na">inverse</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="mi">3</span><span class="o">));</span>
<span class="o">}</span>
</pre></div>


<h3>Multimap</h3>
<div class="highlight"><pre><span></span><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">whenCreateMultimap_thenCreated</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Multimap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">multimap</span> <span class="o">=</span> <span class="n">ArrayListMultimap</span><span class="o">.</span><span class="na">create</span><span class="o">();</span>
    <span class="n">multimap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;fruit&quot;</span><span class="o">,</span> <span class="s">&quot;apple&quot;</span><span class="o">);</span>
    <span class="n">multimap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;fruit&quot;</span><span class="o">,</span> <span class="s">&quot;banana&quot;</span><span class="o">);</span>
    <span class="n">multimap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;pet&quot;</span><span class="o">,</span> <span class="s">&quot;cat&quot;</span><span class="o">);</span>
    <span class="n">multimap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;pet&quot;</span><span class="o">,</span> <span class="s">&quot;dog&quot;</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">multimap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;fruit&quot;</span><span class="o">),</span> <span class="n">containsInAnyOrder</span><span class="o">(</span><span class="s">&quot;apple&quot;</span><span class="o">,</span> <span class="s">&quot;banana&quot;</span><span class="o">));</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">multimap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;pet&quot;</span><span class="o">),</span> <span class="n">containsInAnyOrder</span><span class="o">(</span><span class="s">&quot;cat&quot;</span><span class="o">,</span> <span class="s">&quot;dog&quot;</span><span class="o">));</span>
<span class="o">}</span>
</pre></div>


<h3>Table</h3>
<div class="highlight"><pre><span></span><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">whenCreatingTable_thenCorrect</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Table</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">String</span><span class="o">,</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">distance</span> <span class="o">=</span> <span class="n">HashBasedTable</span><span class="o">.</span><span class="na">create</span><span class="o">();</span>
    <span class="n">distance</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;London&quot;</span><span class="o">,</span> <span class="s">&quot;Paris&quot;</span><span class="o">,</span> <span class="mi">340</span><span class="o">);</span>
    <span class="n">distance</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;New York&quot;</span><span class="o">,</span> <span class="s">&quot;Los Angeles&quot;</span><span class="o">,</span> <span class="mi">3940</span><span class="o">);</span>
    <span class="n">distance</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;London&quot;</span><span class="o">,</span> <span class="s">&quot;New York&quot;</span><span class="o">,</span> <span class="mi">5576</span><span class="o">);</span>

    <span class="n">assertEquals</span><span class="o">(</span><span class="mi">3940</span><span class="o">,</span> <span class="n">distance</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;New York&quot;</span><span class="o">,</span> <span class="s">&quot;Los Angeles&quot;</span><span class="o">).</span><span class="na">intValue</span><span class="o">());</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">distance</span><span class="o">.</span><span class="na">columnKeySet</span><span class="o">(),</span> 
      <span class="n">containsInAnyOrder</span><span class="o">(</span><span class="s">&quot;Paris&quot;</span><span class="o">,</span> <span class="s">&quot;New York&quot;</span><span class="o">,</span> <span class="s">&quot;Los Angeles&quot;</span><span class="o">));</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">distance</span><span class="o">.</span><span class="na">rowKeySet</span><span class="o">(),</span> <span class="n">containsInAnyOrder</span><span class="o">(</span><span class="s">&quot;London&quot;</span><span class="o">,</span> <span class="s">&quot;New York&quot;</span><span class="o">));</span>
<span class="o">}</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">whenTransposingTable_thenCorrect</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Table</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">String</span><span class="o">,</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">distance</span> <span class="o">=</span> <span class="n">HashBasedTable</span><span class="o">.</span><span class="na">create</span><span class="o">();</span>
    <span class="n">distance</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;London&quot;</span><span class="o">,</span> <span class="s">&quot;Paris&quot;</span><span class="o">,</span> <span class="mi">340</span><span class="o">);</span>
    <span class="n">distance</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;New York&quot;</span><span class="o">,</span> <span class="s">&quot;Los Angeles&quot;</span><span class="o">,</span> <span class="mi">3940</span><span class="o">);</span>
    <span class="n">distance</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;London&quot;</span><span class="o">,</span> <span class="s">&quot;New York&quot;</span><span class="o">,</span> <span class="mi">5576</span><span class="o">);</span>

    <span class="n">Table</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">transposed</span> <span class="o">=</span> <span class="n">Tables</span><span class="o">.</span><span class="na">transpose</span><span class="o">(</span><span class="n">distance</span><span class="o">);</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">transposed</span><span class="o">.</span><span class="na">rowKeySet</span><span class="o">(),</span> 
      <span class="n">containsInAnyOrder</span><span class="o">(</span><span class="s">&quot;Paris&quot;</span><span class="o">,</span> <span class="s">&quot;New York&quot;</span><span class="o">,</span> <span class="s">&quot;Los Angeles&quot;</span><span class="o">));</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">transposed</span><span class="o">.</span><span class="na">columnKeySet</span><span class="o">(),</span> <span class="n">containsInAnyOrder</span><span class="o">(</span><span class="s">&quot;London&quot;</span><span class="o">,</span> <span class="s">&quot;New York&quot;</span><span class="o">));</span>
<span class="o">}</span>
</pre></div>


<h3>ClassToInstanceMap</h3>
<div class="highlight"><pre><span></span><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">whenCreatingClassToInstanceMap_thenCorrect</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">ClassToInstanceMap</span><span class="o">&lt;</span><span class="n">Number</span><span class="o">&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="n">MutableClassToInstanceMap</span><span class="o">.</span><span class="na">create</span><span class="o">();</span>
    <span class="n">numbers</span><span class="o">.</span><span class="na">putInstance</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
    <span class="n">numbers</span><span class="o">.</span><span class="na">putInstance</span><span class="o">(</span><span class="n">Double</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mf">1.5</span><span class="o">);</span>

    <span class="n">assertEquals</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">numbers</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mf">1.5</span><span class="o">,</span> <span class="n">numbers</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Double</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
<span class="o">}</span>
</pre></div>


<h3>Group List using Multimap</h3>
<div class="highlight"><pre><span></span><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">whenGroupingListsUsingMultimap_thenGrouped</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">names</span> <span class="o">=</span> <span class="n">Lists</span><span class="o">.</span><span class="na">newArrayList</span><span class="o">(</span><span class="s">&quot;John&quot;</span><span class="o">,</span> <span class="s">&quot;Adam&quot;</span><span class="o">,</span> <span class="s">&quot;Tom&quot;</span><span class="o">);</span>
    <span class="n">Function</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">func</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Function</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Integer</span><span class="o">&gt;(){</span>
        <span class="kd">public</span> <span class="n">Integer</span> <span class="nf">apply</span><span class="o">(</span><span class="n">String</span> <span class="n">input</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">input</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">};</span>
    <span class="n">Multimap</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">groups</span> <span class="o">=</span> <span class="n">Multimaps</span><span class="o">.</span><span class="na">index</span><span class="o">(</span><span class="n">names</span><span class="o">,</span> <span class="n">func</span><span class="o">);</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">groups</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span> <span class="n">containsInAnyOrder</span><span class="o">(</span><span class="s">&quot;Tom&quot;</span><span class="o">));</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">groups</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="n">containsInAnyOrder</span><span class="o">(</span><span class="s">&quot;John&quot;</span><span class="o">,</span> <span class="s">&quot;Adam&quot;</span><span class="o">));</span>
<span class="o">}</span>
</pre></div>


<h2>Guava StopWatch</h2>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">com.google.common.base.Stopwatch</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GuavaStopWatch</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">printTitle</span><span class="o">(</span><span class="s">&quot;StopWatch Start &quot;</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">countingDown</span><span class="o">=</span><span class="mi">10</span><span class="o">;</span>
        <span class="n">Stopwatch</span> <span class="n">stopwatch</span><span class="o">=</span><span class="n">Stopwatch</span><span class="o">.</span><span class="na">createUnstarted</span><span class="o">();</span>
        <span class="n">stopwatch</span><span class="o">.</span><span class="na">elapsed</span><span class="o">(</span><span class="n">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">);</span>
        <span class="n">stopwatch</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        <span class="k">while</span><span class="o">(</span><span class="n">countingDown</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">){</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
            <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>
                <span class="n">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">println</span><span class="o">(</span><span class="s">&quot;StopWatch Is Running ? --&gt; &quot;</span><span class="o">+</span><span class="n">stopwatch</span><span class="o">.</span><span class="na">isRunning</span><span class="o">());</span>
            <span class="n">println</span><span class="o">(</span><span class="s">&quot;StopWatch Time is &quot;</span><span class="o">+</span><span class="n">stopwatch</span><span class="o">);</span>
            <span class="n">countingDown</span><span class="o">--;</span>
        <span class="o">}</span>
        <span class="n">printTitle</span><span class="o">(</span><span class="s">&quot;End Of Looping&quot;</span><span class="o">);</span>
        <span class="n">println</span><span class="o">(</span><span class="s">&quot;Check Total Time is Needed: &quot;</span><span class="o">+</span><span class="n">stopwatch</span><span class="o">);</span>
        <span class="n">stopwatch</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2>GuavaCache</h2>
<blockquote>
<p>Guava Cache是在内存中缓存数据，相比较于数据库或redis存储，访问内存中的数据会更加高效。</p>
</blockquote>
<p>Guava官网介绍，下面的这几种情况可以考虑使用Guava Cache：</p>
<ul>
<li>愿意消耗一些内存空间来提升速度。</li>
<li>预料到某些键会被多次查询。</li>
<li>缓存中存放的数据总量不会超出内存容量。</li>
</ul>
<div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>  
    <span class="nt">&lt;groupId&gt;</span>com.google.guava<span class="nt">&lt;/groupId&gt;</span>  
    <span class="nt">&lt;artifactId&gt;</span>guava<span class="nt">&lt;/artifactId&gt;</span>  
    <span class="nt">&lt;version&gt;</span>19.0<span class="nt">&lt;/version&gt;</span>  
<span class="nt">&lt;/dependency&gt;</span>  
</pre></div>


<h3>构建缓存对象</h3>
<p>接口Cache代表一块缓存,它有如下方法:</p>
<div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Cache</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span> <span class="n">V</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="n">V</span> <span class="nf">get</span><span class="o">(</span><span class="n">K</span> <span class="n">key</span><span class="o">,</span> <span class="n">Callable</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">V</span><span class="o">&gt;</span> <span class="n">valueLoader</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ExecutionException</span><span class="o">;</span>

    <span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span> <span class="n">V</span><span class="o">&gt;</span> <span class="nf">getAllPresent</span><span class="o">(</span><span class="n">Iterable</span><span class="o">&lt;?&gt;</span> <span class="n">keys</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">put</span><span class="o">(</span><span class="n">K</span> <span class="n">key</span><span class="o">,</span> <span class="n">V</span> <span class="n">value</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">putAll</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">K</span><span class="o">,</span> <span class="o">?</span> <span class="kd">extends</span> <span class="n">V</span><span class="o">&gt;</span> <span class="n">m</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">invalidate</span><span class="o">(</span><span class="n">Object</span> <span class="n">key</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">invalidateAll</span><span class="o">(</span><span class="n">Iterable</span><span class="o">&lt;?&gt;</span> <span class="n">keys</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">invalidateAll</span><span class="o">();</span>

    <span class="kt">long</span> <span class="nf">size</span><span class="o">();</span>

    <span class="n">CacheStats</span> <span class="nf">stats</span><span class="o">();</span>

    <span class="n">ConcurrentMap</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span> <span class="n">V</span><span class="o">&gt;</span> <span class="nf">asMap</span><span class="o">();</span>

    <span class="kt">void</span> <span class="nf">cleanUp</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>


<p>可以通过CacheBuilder类来构建一个缓存对象,CacheBuilder类采用builder设计模式,它的每个方法都返回CacheBuilder本身,直到builder()方法被调用,构建一个缓存对象的代码如下:</p>
<div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StudyGuavaCache</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Cache</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">cache</span> <span class="o">=</span> <span class="n">CacheBuilder</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;word&quot;</span><span class="o">,</span><span class="s">&quot;Hello Guava Cache&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cache</span><span class="o">.</span><span class="na">getIfPresent</span><span class="o">(</span><span class="s">&quot;word&quot;</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>上面的代码通过CacheBuilder.newBuilder().build()这句代码创建了一个Cache缓存对象，并在缓存对象中存储了key为word，value为Hello Guava Cache的一条记录。可以看到Cache非常类似于JDK中的Map，但是相比于Map，Guava Cache提供了很多更强大的功能。</p>
<h3>设置最大存储</h3>
<p>Guava Cache可以设置在构建缓存对象的时候指定缓存所存储的最大记录数量.当Cache中的记录数量达到最大值后再调用put方法向其中添加对象Guava会先从当前缓存的对象记录中选择一条删除掉，腾出空间后再将新的对象存储到Cache中。</p>
<div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StudyGuavaCache</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Cache</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">cache</span> <span class="o">=</span> <span class="n">CacheBuilder</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">maximumSize</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;key1&quot;</span><span class="o">,</span><span class="s">&quot;value1&quot;</span><span class="o">);</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;key2&quot;</span><span class="o">,</span><span class="s">&quot;value2&quot;</span><span class="o">);</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;key3&quot;</span><span class="o">,</span><span class="s">&quot;value3&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;第一个值：&quot;</span> <span class="o">+</span> <span class="n">cache</span><span class="o">.</span><span class="na">getIfPresent</span><span class="o">(</span><span class="s">&quot;key1&quot;</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;第二个值：&quot;</span> <span class="o">+</span> <span class="n">cache</span><span class="o">.</span><span class="na">getIfPresent</span><span class="o">(</span><span class="s">&quot;key2&quot;</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;第三个值：&quot;</span> <span class="o">+</span> <span class="n">cache</span><span class="o">.</span><span class="na">getIfPresent</span><span class="o">(</span><span class="s">&quot;key3&quot;</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>上面代码在构造缓存对象时，通过CacheBuilder类的maximumSize方法指定Cache最多可以存储两个对象，然后调用Cache的put方法向其中添加了三个对象。程序执行结果如下图所示，可以看到第三条对象记录的插入，导致了第一条对象记录被删除。</p>
<h3>移除监听器</h3>
<p>可以为Cache对象添加一个移除监听器，这样当有记录被删除时可以感知到这个事件。</p>
<div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StudyGuavaCache</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">InterruptedException</span> <span class="o">{</span>
        <span class="n">RemovalListener</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">listener</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RemovalListener</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onRemoval</span><span class="o">(</span><span class="n">RemovalNotification</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">notification</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;[&quot;</span> <span class="o">+</span> <span class="n">notification</span><span class="o">.</span><span class="na">getKey</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;:&quot;</span> <span class="o">+</span> <span class="n">notification</span><span class="o">.</span><span class="na">getValue</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;] is removed!&quot;</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">Cache</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">cache</span> <span class="o">=</span> <span class="n">CacheBuilder</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">maximumSize</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
                <span class="o">.</span><span class="na">removalListener</span><span class="o">(</span><span class="n">listener</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
        <span class="n">Object</span> <span class="n">value</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">();</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;key1&quot;</span><span class="o">,</span><span class="s">&quot;value1&quot;</span><span class="o">);</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;key2&quot;</span><span class="o">,</span><span class="s">&quot;value2&quot;</span><span class="o">);</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;key3&quot;</span><span class="o">,</span><span class="s">&quot;value3&quot;</span><span class="o">);</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;key4&quot;</span><span class="o">,</span><span class="s">&quot;value3&quot;</span><span class="o">);</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;key5&quot;</span><span class="o">,</span><span class="s">&quot;value3&quot;</span><span class="o">);</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;key6&quot;</span><span class="o">,</span><span class="s">&quot;value3&quot;</span><span class="o">);</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;key7&quot;</span><span class="o">,</span><span class="s">&quot;value3&quot;</span><span class="o">);</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;key8&quot;</span><span class="o">,</span><span class="s">&quot;value3&quot;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>removalListener方法为Cache指定了一个移除监听器，这样当有记录从Cache中被删除时，监听器listener就会感知到这个事件。程序运行结果如下图所示</p>
<p><img alt="https://s1.ax1x.com/2018/04/14/CZ11q1.jpg" src="https://s1.ax1x.com/2018/04/14/CZ11q1.jpg"></p>
<h1>参考</h1>
<p><a href="http://ifeve.com/google-guava-collectionutilities/">http://ifeve.com/google-guava-collectionutilities/</a></p>
<p><a href="https://segmentfault.com/a/1190000011105644">Guava Cache用法介绍</a></p>
            <aside>
            <hr/>
            <nav>
            <ul class="articles_timeline">
 
                <li class="previous_article">« <a href="/java-8-lambda-date-2017-12-28-9032-ch.html" title="Previous: JAVA8 Lambda">JAVA8 Lambda</a></li>
 
                <li class="next_article"><a href="/bigdata-mr-date-2018-01-04-1541-ch.html" title="Next: Hadoop mapreduce multiple files">Hadoop mapreduce multiple files</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
 
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2017-12-28T18:46:53+08:00">12 28, 2017</time>
 
            <h4>Last Updated</h4>
            <div class="last_updated">2017-12-28 18:46:53+08:00</div>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#java-ref">java</a> 
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article"> 
                <li><a href="/tags.html#guava-ref">guava
                    <span>1</span>
</a></li>
                <li><a href="/tags.html#java-ref">java
                    <span>14</span>
</a></li>
                <li><a href="/tags.html#jvm-ref">jvm
                    <span>9</span>
</a></li>
            </ul>

        </div>
        </section>
</div>
<div id="gitalk-container"></div>
</article>

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script>
    var gitalk = new Gitalk({
        clientID: '55daf540951794dd3faf',
        clientSecret: 'd6eaad9fa6d9e7ff2647ef8b6e21327da0cc7cda',
        repo: 'blog-comment',
        owner: 'xixuebin',
        admin: ['xixuebin'],
        id: location.pathname,      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
    })

    gitalk.render('gitalk-container')
</script>

                </div>
                <div class="span1"></div>
            </div>
        </div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="https://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    </body>
</html>