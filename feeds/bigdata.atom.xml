<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>寒玉 Blog - bigdata</title><link href="xixuebin.github.io/" rel="alternate"></link><link href="xixuebin.github.io/feeds/bigdata.atom.xml" rel="self"></link><id>xixuebin.github.io/</id><updated>2019-06-21T11:54:55+08:00</updated><entry><title>knime官方node梳理</title><link href="xixuebin.github.io/2019-06-21-115455-ch.html" rel="alternate"></link><published>2019-06-21T11:54:55+08:00</published><updated>2019-06-21T11:54:55+08:00</updated><author><name>kevin.xi</name></author><id>tag:None,2019-06-21:xixuebin.github.io/2019-06-21-115455-ch.html</id><summary type="html">&lt;p&gt;Summary&lt;/p&gt;</summary><content type="html">&lt;!-- https://code.visualstudio.com/docs/editor/userdefinedsnippets --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="#Knime%E5%AE%98%E6%96%B9Nodes"&gt;Knime官方Nodes&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#IO"&gt;IO&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#Read"&gt;Read&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#File-Handling"&gt;File Handling&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Other"&gt;Other&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Cache"&gt;Cache&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Write"&gt;Write&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#Database"&gt;Database&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#Utility"&gt;Utility&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#ReadWrite"&gt;Read/Write&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Connector"&gt;Connector&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Manipulation"&gt;Manipulation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#Structured-Data"&gt;Structured Data&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#XML"&gt;XML&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#JSON"&gt;JSON&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#KNIME-Labs"&gt;KNIME Labs&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#PMML-Translation"&gt;PMML Translation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#Manipulation-1"&gt;Manipulation&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#Row"&gt;Row&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#PMML"&gt;PMML&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Column"&gt;Column&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Table"&gt;Table&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#Workflow-Control"&gt;Workflow Control&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#Automation"&gt;Automation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Switches"&gt;Switches&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Loop-Support"&gt;Loop Support&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Variables"&gt;Variables&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Meta-Nodes"&gt;Meta Nodes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Error-Handling"&gt;Error Handling&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#Other-Data-Types"&gt;Other Data Types&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#Time-Series"&gt;Time Series&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#Scripting"&gt;Scripting&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#Java"&gt;Java&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#Tools--Services"&gt;Tools &amp;amp; Services&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#REST-Web-Services"&gt;REST Web Services&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Apache-Spark"&gt;Apache Spark&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#Views"&gt;Views&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#Spark-Line-Appender"&gt;Spark Line Appender&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Radar-Plot-Appender"&gt;Radar Plot Appender&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Property"&gt;Property&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Box-Plot"&gt;Box Plot&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Conditional-Box-Plot"&gt;Conditional Box Plot&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#HiLite-Table"&gt;HiLite Table&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Histogram"&gt;Histogram&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Histogram-interactive"&gt;Histogram (interactive)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Interactive-Table"&gt;Interactive Table&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Lift-Chart"&gt;Lift Chart&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Line-Plot"&gt;Line Plot&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Parallel-Coordinates"&gt;Parallel Coordinates&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Pie-chart"&gt;Pie chart&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Pie-chart-interactive"&gt;Pie chart (interactive)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Scatter-Matrix"&gt;Scatter Matrix&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Scatter-Plot"&gt;Scatter Plot&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Utility-1"&gt;Utility&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#Reporting"&gt;Reporting&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#Data-to-Report"&gt;Data to Report&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Image-to-Report"&gt;Image to Report&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#Analytics"&gt;Analytics&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#Mining"&gt;Mining&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Distance-Calculation"&gt;Distance Calculation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Statistics"&gt;Statistics&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#Spark-Node-Demo"&gt;Spark Node Demo&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#Spark-on-Hadoop"&gt;Spark on Hadoop&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#hive-to-spark-to-hive"&gt;hive to spark to hive&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Comprehensive-Model-Learning-Mass-Prediction"&gt;Comprehensive Model Learning Mass Prediction&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Knime官方Nodes&lt;/h1&gt;
&lt;h2&gt;IO&lt;/h2&gt;
&lt;h3&gt;Read&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;File Reader&lt;/li&gt;
&lt;li&gt;ARFF Reader&lt;/li&gt;
&lt;li&gt;CSV Reader&lt;/li&gt;
&lt;li&gt;Line Reader&lt;/li&gt;
&lt;li&gt;Table Reader&lt;/li&gt;
&lt;li&gt;PMML Reader&lt;/li&gt;
&lt;li&gt;Model Reader&lt;/li&gt;
&lt;li&gt;Fixed Width File Reader&lt;/li&gt;
&lt;li&gt;List Files&lt;/li&gt;
&lt;li&gt;Read Images&lt;/li&gt;
&lt;li&gt;Explorer Browser&lt;/li&gt;
&lt;li&gt;Excel Reader (XLS)&lt;/li&gt;
&lt;li&gt;Read Excel Sheet Names (XLS)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;File Handling&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Remote&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Connections&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Create Directory&lt;/li&gt;
&lt;li&gt;Delete Files&lt;/li&gt;
&lt;li&gt;Download&lt;/li&gt;
&lt;li&gt;Download / Upload from List&lt;/li&gt;
&lt;li&gt;List Remote Files&lt;/li&gt;
&lt;li&gt;Upload&lt;/li&gt;
&lt;li&gt;HDFS File Permission&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Zip&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Unzip Files&lt;/li&gt;
&lt;li&gt;Zip Files&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Binary Objects&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Binary Objects to Files&lt;/li&gt;
&lt;li&gt;Binary Objects to PNGs&lt;/li&gt;
&lt;li&gt;Binary Objects to Strings&lt;/li&gt;
&lt;li&gt;Files to Binary Objects&lt;/li&gt;
&lt;li&gt;PNGs to Binary Objects&lt;/li&gt;
&lt;li&gt;Strings to Binary Objects&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;URI&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Extract URI Info&lt;/li&gt;
&lt;li&gt;Port to URI&lt;/li&gt;
&lt;li&gt;String to URI&lt;/li&gt;
&lt;li&gt;URI Port to Variable&lt;/li&gt;
&lt;li&gt;URI to Port&lt;/li&gt;
&lt;li&gt;URI to String&lt;/li&gt;
&lt;li&gt;URL to File Path&lt;/li&gt;
&lt;li&gt;URL to File Path (Variable)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Copy/Move Files&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;File Meta Info&lt;/li&gt;
&lt;li&gt;Find MIME-Type&lt;/li&gt;
&lt;li&gt;List MIME-Types&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Other&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Table Creator&lt;/li&gt;
&lt;li&gt;Data Generator&lt;/li&gt;
&lt;li&gt;Create Table Structure&lt;/li&gt;
&lt;li&gt;Create Temp Dir&lt;/li&gt;
&lt;li&gt;Send Email&lt;/li&gt;
&lt;li&gt;Extract System Properties&lt;/li&gt;
&lt;li&gt;Extract Context Properties&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Cache&lt;/h3&gt;
&lt;h3&gt;Write&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Explorer Writer&lt;/li&gt;
&lt;li&gt;CSV Writer&lt;/li&gt;
&lt;li&gt;ARFF Writer&lt;/li&gt;
&lt;li&gt;Table Writer&lt;/li&gt;
&lt;li&gt;PMML Writer&lt;/li&gt;
&lt;li&gt;Model Writer&lt;/li&gt;
&lt;li&gt;Image Port Writer&lt;/li&gt;
&lt;li&gt;Image Column Writer&lt;/li&gt;
&lt;li&gt;Excel Sheet Appender (XLS)&lt;/li&gt;
&lt;li&gt;Excel Writer (XLS)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Database&lt;/h2&gt;
&lt;h3&gt;Utility&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Database Drop Table&lt;/li&gt;
&lt;li&gt;Database SQL Executor&lt;/li&gt;
&lt;li&gt;SQL Extract&lt;/li&gt;
&lt;li&gt;SQL Inject&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Read/Write&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Database Reader&lt;/li&gt;
&lt;li&gt;Database Table Connector&lt;/li&gt;
&lt;li&gt;Database Connection Table Reader&lt;/li&gt;
&lt;li&gt;Database Connection Table Writer&lt;/li&gt;
&lt;li&gt;Database Looping&lt;/li&gt;
&lt;li&gt;Parameterized Database Query&lt;/li&gt;
&lt;li&gt;Database Table Selector&lt;/li&gt;
&lt;li&gt;Database Writer&lt;/li&gt;
&lt;li&gt;Database Update&lt;/li&gt;
&lt;li&gt;Database Delete&lt;/li&gt;
&lt;li&gt;Impala Loader&lt;/li&gt;
&lt;li&gt;Hive Loader&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Connector&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Impala Connector&lt;/li&gt;
&lt;li&gt;Vertica Connector&lt;/li&gt;
&lt;li&gt;Database Connector&lt;/li&gt;
&lt;li&gt;Hive Connector&lt;/li&gt;
&lt;li&gt;H2 Connector&lt;/li&gt;
&lt;li&gt;Microsoft SQL Server Connector&lt;/li&gt;
&lt;li&gt;MySQL Connector&lt;/li&gt;
&lt;li&gt;PostgreSQL Connector&lt;/li&gt;
&lt;li&gt;SQLite Connector&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Manipulation&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Database Apply-Binner&lt;/li&gt;
&lt;li&gt;Database Auto-Binner&lt;/li&gt;
&lt;li&gt;Database Column Rename&lt;/li&gt;
&lt;li&gt;Database Numeric-Binner&lt;/li&gt;
&lt;li&gt;Database Pivot&lt;/li&gt;
&lt;li&gt;Database Row Filter&lt;/li&gt;
&lt;li&gt;Database Query&lt;/li&gt;
&lt;li&gt;Database Column Filter&lt;/li&gt;
&lt;li&gt;Database Sorter&lt;/li&gt;
&lt;li&gt;Database GroupBy&lt;/li&gt;
&lt;li&gt;Database Joiner&lt;/li&gt;
&lt;li&gt;Database Table Creator&lt;/li&gt;
&lt;li&gt;Database Sampling&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Structured Data&lt;/h2&gt;
&lt;h3&gt;XML&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;XML Reader&lt;/li&gt;
&lt;li&gt;XML Writer&lt;/li&gt;
&lt;li&gt;String To XML&lt;/li&gt;
&lt;li&gt;XPath&lt;/li&gt;
&lt;li&gt;XSLT&lt;/li&gt;
&lt;li&gt;Column To XML&lt;/li&gt;
&lt;li&gt;XML Column Combiner&lt;/li&gt;
&lt;li&gt;XML Row Combiner&lt;/li&gt;
&lt;li&gt;XML Row Combine and Write&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;JSON&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Container Input (JSON)&lt;/li&gt;
&lt;li&gt;Container Output (JSON)&lt;/li&gt;
&lt;li&gt;JSON Reader&lt;/li&gt;
&lt;li&gt;JSON Writer&lt;/li&gt;
&lt;li&gt;String to JSON&lt;/li&gt;
&lt;li&gt;Table to JSON&lt;/li&gt;
&lt;li&gt;JSON to Table&lt;/li&gt;
&lt;li&gt;Columns to JSON&lt;/li&gt;
&lt;li&gt;XML To JSON&lt;/li&gt;
&lt;li&gt;JSON To XML&lt;/li&gt;
&lt;li&gt;JSON Path&lt;/li&gt;
&lt;li&gt;JSON Path (Dictionary)&lt;/li&gt;
&lt;li&gt;JSON Column Combiner&lt;/li&gt;
&lt;li&gt;JSON Row Combiner&lt;/li&gt;
&lt;li&gt;JSON Row Combiner and Writer&lt;/li&gt;
&lt;li&gt;JSON Transformer&lt;/li&gt;
&lt;li&gt;JSON Schema Validator&lt;/li&gt;
&lt;li&gt;JSON Diff&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;KNIME Labs&lt;/h2&gt;
&lt;h3&gt;PMML Translation&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;PMML to Java&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PMML Compiling Predictor&lt;/li&gt;
&lt;li&gt;PMML Compiler&lt;/li&gt;
&lt;li&gt;Compiled Model Predictor&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Manipulation&lt;/h2&gt;
&lt;h3&gt;Row&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Filter&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Filter Apply&lt;/li&gt;
&lt;li&gt;Filter Apply Row Splitter&lt;/li&gt;
&lt;li&gt;Filter Definition Merger&lt;/li&gt;
&lt;li&gt;HiLite Row Splitter&lt;/li&gt;
&lt;li&gt;Nominal Value Row Filter&lt;/li&gt;
&lt;li&gt;Nominal Value Row Splitter&lt;/li&gt;
&lt;li&gt;Numeric Row Splitter&lt;/li&gt;
&lt;li&gt;Reference Row Filter&lt;/li&gt;
&lt;li&gt;Reference Row Splitter&lt;/li&gt;
&lt;li&gt;Row Filter&lt;/li&gt;
&lt;li&gt;Row Splitter&lt;/li&gt;
&lt;li&gt;Rule-based Row Filter&lt;/li&gt;
&lt;li&gt;Rule-based Row Filter (Dictionary)&lt;/li&gt;
&lt;li&gt;Rule-based Row Splitter&lt;/li&gt;
&lt;li&gt;Rule-based Row Splitter (Dictionary)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Transform&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Concatenate&lt;/li&gt;
&lt;li&gt;Concatenate (Optional in)&lt;/li&gt;
&lt;li&gt;GroupBy&lt;/li&gt;
&lt;li&gt;Ungroup&lt;/li&gt;
&lt;li&gt;Partitioning&lt;/li&gt;
&lt;li&gt;Pivoting&lt;/li&gt;
&lt;li&gt;Unpivoting&lt;/li&gt;
&lt;li&gt;Rank&lt;/li&gt;
&lt;li&gt;Row Sampling&lt;/li&gt;
&lt;li&gt;Bootstrap Sampling&lt;/li&gt;
&lt;li&gt;Equal Size Sampling&lt;/li&gt;
&lt;li&gt;Shuffle&lt;/li&gt;
&lt;li&gt;SorterRule-based Row Splitter (Dictionary)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Other&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Rule Engine&lt;/li&gt;
&lt;li&gt;Rule Engine (Dictionary)&lt;/li&gt;
&lt;li&gt;Add Empty Rows&lt;/li&gt;
&lt;li&gt;Extract Column Header&lt;/li&gt;
&lt;li&gt;Insert Column Header&lt;/li&gt;
&lt;li&gt;RowID&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;PMML&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Cell To PMML&lt;/li&gt;
&lt;li&gt;PMML To Cell&lt;/li&gt;
&lt;li&gt;Column Filter (PMML)&lt;/li&gt;
&lt;li&gt;Denormalizer (PMML)&lt;/li&gt;
&lt;li&gt;Many to One (PMML)&lt;/li&gt;
&lt;li&gt;Normalizer (PMML)&lt;/li&gt;
&lt;li&gt;Normalizer Apply (PMML)&lt;/li&gt;
&lt;li&gt;Number To String (PMML)&lt;/li&gt;
&lt;li&gt;Numeric Binner (PMML)&lt;/li&gt;
&lt;li&gt;One to Many (PMML)&lt;/li&gt;
&lt;li&gt;String To Number (PMML)&lt;/li&gt;
&lt;li&gt;XML To PMML&lt;/li&gt;
&lt;li&gt;Ruleset Editor&lt;/li&gt;
&lt;li&gt;Ruleset Predictor&lt;/li&gt;
&lt;li&gt;Ruleset to Table&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Column&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Transform&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Case Converter&lt;/li&gt;
&lt;li&gt;Column Comparator&lt;/li&gt;
&lt;li&gt;Column Resorter&lt;/li&gt;
&lt;li&gt;Lag Column&lt;/li&gt;
&lt;li&gt;Reference Column Resorter&lt;/li&gt;
&lt;li&gt;Denormalizer&lt;/li&gt;
&lt;li&gt;Extract Missing Value Cause&lt;/li&gt;
&lt;li&gt;Missing Value&lt;/li&gt;
&lt;li&gt;Missing Value (Apply)&lt;/li&gt;
&lt;li&gt;Normalizer&lt;/li&gt;
&lt;li&gt;Normalizer (Apply)&lt;/li&gt;
&lt;li&gt;One to Many&lt;/li&gt;
&lt;li&gt;Many to One&lt;/li&gt;
&lt;li&gt;SMOTE&lt;/li&gt;
&lt;li&gt;Set Operator&lt;/li&gt;
&lt;li&gt;Subset Matcher&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Binning&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Auto-Binner&lt;/li&gt;
&lt;li&gt;Auto-Binner (Apply)&lt;/li&gt;
&lt;li&gt;Numeric Binner&lt;/li&gt;
&lt;li&gt;Binner (Dictionary)&lt;/li&gt;
&lt;li&gt;CAIM Binner&lt;/li&gt;
&lt;li&gt;CAIM Applier&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Interactive HiLite Collector&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;Table Validator&lt;/li&gt;
&lt;li&gt;Table Validator (Reference)&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Convert &amp;amp; Replace&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;String Manipulation&lt;/li&gt;
&lt;li&gt;Category To Number&lt;/li&gt;
&lt;li&gt;Category To Number (Apply)&lt;/li&gt;
&lt;li&gt;Cell Replacer&lt;/li&gt;
&lt;li&gt;Column Auto Type Cast&lt;/li&gt;
&lt;li&gt;Column Rename&lt;/li&gt;
&lt;li&gt;Column Rename (Regex)&lt;/li&gt;
&lt;li&gt;Constant Value Column&lt;/li&gt;
&lt;li&gt;Number To Category (Apply)&lt;/li&gt;
&lt;li&gt;Number To String&lt;/li&gt;
&lt;li&gt;String To Number&lt;/li&gt;
&lt;li&gt;Double To Int&lt;/li&gt;
&lt;li&gt;Round Double&lt;/li&gt;
&lt;li&gt;String Replace (Dictionary)&lt;/li&gt;
&lt;li&gt;String Replacer&lt;/li&gt;
&lt;li&gt;Domain Calculator&lt;/li&gt;
&lt;li&gt;Edit Numeric Domain&lt;/li&gt;
&lt;li&gt;Edit Nominal Domain (Dictionary)&lt;/li&gt;
&lt;li&gt;Edit Nominal Domain&lt;/li&gt;
&lt;li&gt;Target Shuffling&lt;/li&gt;
&lt;li&gt;Math Formula&lt;/li&gt;
&lt;li&gt;Math Formula (Multi Column)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Filter&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Column Filter&lt;/li&gt;
&lt;li&gt;Reference Column Filter&lt;/li&gt;
&lt;li&gt;Constant Value Column Filter&lt;/li&gt;
&lt;li&gt;Missing Value Column Filter&lt;/li&gt;
&lt;li&gt;Reference Column Splitter&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Split &amp;amp; Combine&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cell Splitter&lt;/li&gt;
&lt;li&gt;Cell Splitter By Position&lt;/li&gt;
&lt;li&gt;Column Aggregator&lt;/li&gt;
&lt;li&gt;Column Combiner&lt;/li&gt;
&lt;li&gt;Column Merger&lt;/li&gt;
&lt;li&gt;Column Splitter&lt;/li&gt;
&lt;li&gt;Column Appender&lt;/li&gt;
&lt;li&gt;Column to Grid&lt;/li&gt;
&lt;li&gt;Create Bit Vector&lt;/li&gt;
&lt;li&gt;Expand Bit Vector&lt;/li&gt;
&lt;li&gt;Create Collection Column&lt;/li&gt;
&lt;li&gt;Split Collection Column&lt;/li&gt;
&lt;li&gt;Create Byte Vector&lt;/li&gt;
&lt;li&gt;Expand Byte Vector&lt;/li&gt;
&lt;li&gt;Joiner&lt;/li&gt;
&lt;li&gt;Cross Joiner&lt;/li&gt;
&lt;li&gt;Regex Split&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Table&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Extract Table Dimension&lt;/li&gt;
&lt;li&gt;Extract Table Spec&lt;/li&gt;
&lt;li&gt;Transpose&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Workflow Control&lt;/h2&gt;
&lt;h3&gt;Automation&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Call Local Workflow (Row Based)&lt;/li&gt;
&lt;li&gt;Container Input (Credentials)&lt;/li&gt;
&lt;li&gt;Container Input (Table)&lt;/li&gt;
&lt;li&gt;Container Input (Variable)&lt;/li&gt;
&lt;li&gt;Container Output (Table)&lt;/li&gt;
&lt;li&gt;Wait...&lt;/li&gt;
&lt;li&gt;Save Workflow&lt;/li&gt;
&lt;li&gt;Timer Info&lt;/li&gt;
&lt;li&gt;Global Timer Info&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Switches&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Java IF (Table)&lt;/li&gt;
&lt;li&gt;IF Switch&lt;/li&gt;
&lt;li&gt;End IF&lt;/li&gt;
&lt;li&gt;CASE Switch Data (Start)&lt;/li&gt;
&lt;li&gt;CASE Switch Data (End)&lt;/li&gt;
&lt;li&gt;CASE Switch Model (Start)&lt;/li&gt;
&lt;li&gt;CASE Switch Model (End)&lt;/li&gt;
&lt;li&gt;CASE Switch Variable (Start)&lt;/li&gt;
&lt;li&gt;CASE Switch Variable (End)&lt;/li&gt;
&lt;li&gt;Empty Table Switch&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Loop Support&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Breakpoint&lt;/li&gt;
&lt;li&gt;Counting Loop Start&lt;/li&gt;
&lt;li&gt;Chunk Loop Start&lt;/li&gt;
&lt;li&gt;Column List Loop Start&lt;/li&gt;
&lt;li&gt;Generic Loop Start&lt;/li&gt;
&lt;li&gt;Table Row To Variable Loop Start&lt;/li&gt;
&lt;li&gt;Loop End&lt;/li&gt;
&lt;li&gt;Variable Condition Loop End&lt;/li&gt;
&lt;li&gt;Group Loop Start&lt;/li&gt;
&lt;li&gt;Interval Loop Start&lt;/li&gt;
&lt;li&gt;Loop End (2 ports)&lt;/li&gt;
&lt;li&gt;Loop End (Column Append)&lt;/li&gt;
&lt;li&gt;Recursive Loop End&lt;/li&gt;
&lt;li&gt;Recursive Loop End (2 ports)&lt;/li&gt;
&lt;li&gt;Recursive Loop Start&lt;/li&gt;
&lt;li&gt;Recursive Loop Start (2 ports)&lt;/li&gt;
&lt;li&gt;Variable Loop End&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Variables&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Create File Name&lt;/li&gt;
&lt;li&gt;Inject Variables (Data)&lt;/li&gt;
&lt;li&gt;Inject Variables (Database)&lt;/li&gt;
&lt;li&gt;Extract Variables (Data)&lt;/li&gt;
&lt;li&gt;Extract Variables (Database)&lt;/li&gt;
&lt;li&gt;Table Column to Variable&lt;/li&gt;
&lt;li&gt;Table Row to Variable&lt;/li&gt;
&lt;li&gt;Variable to Table Column&lt;/li&gt;
&lt;li&gt;Variable to Table Row&lt;/li&gt;
&lt;li&gt;Merge Variables&lt;/li&gt;
&lt;li&gt;Java Edit Variable&lt;/li&gt;
&lt;li&gt;Rule Engine Variable&lt;/li&gt;
&lt;li&gt;Rule Engine Variable (Dictionary)&lt;/li&gt;
&lt;li&gt;String Manipulation (Variable)&lt;/li&gt;
&lt;li&gt;Java Edit Variable (simple)&lt;/li&gt;
&lt;li&gt;Math Formula (Variable)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Meta Nodes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Variables Loop (Data)&lt;/li&gt;
&lt;li&gt;Variables Loop (Database)&lt;/li&gt;
&lt;li&gt;Iterate List of Files&lt;/li&gt;
&lt;li&gt;Loop x-times&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Error Handling&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Catch Errors (DB Ports)&lt;/li&gt;
&lt;li&gt;Catch Errors (Data Ports)&lt;/li&gt;
&lt;li&gt;Catch Errors (Generic Ports)&lt;/li&gt;
&lt;li&gt;Catch Errors (Var Ports)&lt;/li&gt;
&lt;li&gt;Try (Data Ports)&lt;/li&gt;
&lt;li&gt;Try (Variable Ports)&lt;/li&gt;
&lt;li&gt;Active Branch Inverter&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Other Data Types&lt;/h2&gt;
&lt;h3&gt;Time Series&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Meta Nodes&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Time-Series Auto-Prediction Predictor&lt;/li&gt;
&lt;li&gt;Time-Series Auto-Prediction Training&lt;/li&gt;
&lt;li&gt;Seasonality Correction&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Time Series (legacy)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Date Field Extractor (legacy)&lt;/li&gt;
&lt;li&gt;Time Field Extractor (legacy)&lt;/li&gt;
&lt;li&gt;Date/Time Shift (legacy)&lt;/li&gt;
&lt;li&gt;Extract Time Window (legacy)&lt;/li&gt;
&lt;li&gt;Mask Date/Time (legacy)&lt;/li&gt;
&lt;li&gt;Preset Date/Time (legacy)&lt;/li&gt;
&lt;li&gt;String to Date/Time (legacy)&lt;/li&gt;
&lt;li&gt;Time Difference (legacy)&lt;/li&gt;
&lt;li&gt;Time Generator (legacy)&lt;/li&gt;
&lt;li&gt;Time to String (legacy)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Manipulate&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Create Date&amp;amp;Time Range&lt;/li&gt;
&lt;li&gt;Date &amp;amp; Time Difference&lt;/li&gt;
&lt;li&gt;Date &amp;amp; Time Shift&lt;/li&gt;
&lt;li&gt;Date &amp;amp; Time-based Row Filter&lt;/li&gt;
&lt;li&gt;Modify Date&lt;/li&gt;
&lt;li&gt;Modify Time&lt;/li&gt;
&lt;li&gt;Modify Time Zone&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Smoothing&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Moving Aggregation&lt;/li&gt;
&lt;li&gt;Moving Average&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Transform&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Date&amp;amp;Time to String&lt;/li&gt;
&lt;li&gt;String to Date&amp;amp;Time&lt;/li&gt;
&lt;li&gt;UNIX Timestamp to Date&amp;amp;Time&lt;/li&gt;
&lt;li&gt;Duration to String&lt;/li&gt;
&lt;li&gt;Duration to Number&lt;/li&gt;
&lt;li&gt;String to Duration&lt;/li&gt;
&lt;li&gt;Date&amp;amp;Time to legacy Date&amp;amp;Time&lt;/li&gt;
&lt;li&gt;Legacy Date&amp;amp;Time to Date&amp;amp;Time&lt;/li&gt;
&lt;li&gt;Extract Date&amp;amp;Time Fields&lt;/li&gt;
&lt;li&gt;Extract Duration Fields&lt;/li&gt;
&lt;li&gt;Window Loop Start&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Scripting&lt;/h2&gt;
&lt;h3&gt;Java&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Java Snippet&lt;/li&gt;
&lt;li&gt;Java Snippet (simple)&lt;/li&gt;
&lt;li&gt;Java Snippet Row Filter&lt;/li&gt;
&lt;li&gt;Java Snippet Row Splitter&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Tools &amp;amp; Services&lt;/h2&gt;
&lt;h3&gt;REST Web Services&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;GET Request&lt;/li&gt;
&lt;li&gt;POST Request&lt;/li&gt;
&lt;li&gt;PUT Request&lt;/li&gt;
&lt;li&gt;DELETE Request&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Apache Spark&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Misc&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;PySpark&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PySpark Script (1 to 1)&lt;/li&gt;
&lt;li&gt;PySpark Script (1 to 2)&lt;/li&gt;
&lt;li&gt;PySpark Script (2 to 1)&lt;/li&gt;
&lt;li&gt;PySpark Script (2 to 2)&lt;/li&gt;
&lt;li&gt;PySpark Script Source&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Spark SQL Query&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Java Snippet&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark DataFrame Java Snippet&lt;/li&gt;
&lt;li&gt;Spark DataFrame Java Snippet (Sink)&lt;/li&gt;
&lt;li&gt;Spark DataFrame Java Snippet (Source)&lt;/li&gt;
&lt;li&gt;Spark RDD Java Snippet&lt;/li&gt;
&lt;li&gt;Spark RDD Java Snippet (Sink)&lt;/li&gt;
&lt;li&gt;Spark RDD Java Snippet (Source)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Management&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;List Spark DataFrames/RDDs&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Column&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark Column Filter&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Transform&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark Missing Value&lt;/li&gt;
&lt;li&gt;Spark Missing Value (Apply)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Convert &amp;amp; Replace&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark Category To Number&lt;/li&gt;
&lt;li&gt;Spark Column Rename&lt;/li&gt;
&lt;li&gt;Spark Column Rename (Regex)&lt;/li&gt;
&lt;li&gt;Spark Compiled Transformations Applier&lt;/li&gt;
&lt;li&gt;Spark Normalizer&lt;/li&gt;
&lt;li&gt;Spark Number To Category (Apply)&lt;/li&gt;
&lt;li&gt;Spark Transformations Applier&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Split &amp;amp; Combine&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark Joiner&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Row&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark Concatenate&lt;/li&gt;
&lt;li&gt;Spark GroupBy&lt;/li&gt;
&lt;li&gt;Spark Partitioning&lt;/li&gt;
&lt;li&gt;Spark Pivot&lt;/li&gt;
&lt;li&gt;Spark Row Filter&lt;/li&gt;
&lt;li&gt;Spark Row Sampling&lt;/li&gt;
&lt;li&gt;Spark Sorter&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Statistics&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark Correlation Filter&lt;/li&gt;
&lt;li&gt;Spark Correlation Matrix&lt;/li&gt;
&lt;li&gt;Spark Linear Correlation&lt;/li&gt;
&lt;li&gt;Spark Statistics&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;IO&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Write&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark to Avro&lt;/li&gt;
&lt;li&gt;Spark to CSV&lt;/li&gt;
&lt;li&gt;Spark to JSON&lt;/li&gt;
&lt;li&gt;Spark to ORC&lt;/li&gt;
&lt;li&gt;Spark to Parquet&lt;/li&gt;
&lt;li&gt;Spark to Table&lt;/li&gt;
&lt;li&gt;Spark to Text&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Database&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Database to Spark&lt;/li&gt;
&lt;li&gt;Hive to Spark&lt;/li&gt;
&lt;li&gt;Impala to Spark&lt;/li&gt;
&lt;li&gt;Spark to Database&lt;/li&gt;
&lt;li&gt;Spark to Hive&lt;/li&gt;
&lt;li&gt;Spark to Impala&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Persist Spark DataFrame/RDD&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;Unpersist Spark DataFrame/RDD&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Read&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Avro to Spark&lt;/li&gt;
&lt;li&gt;CSV to Spark&lt;/li&gt;
&lt;li&gt;JSON to Spark&lt;/li&gt;
&lt;li&gt;ORC to Spark&lt;/li&gt;
&lt;li&gt;Parquet to Spark&lt;/li&gt;
&lt;li&gt;Table to Spark&lt;/li&gt;
&lt;li&gt;Text to Spark&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Create Big Data Test Environment&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;Create Local Big Data Environment&lt;/li&gt;
&lt;li&gt;Create Spark Context (Jobserver)&lt;/li&gt;
&lt;li&gt;Create Spark Context (Livy)&lt;/li&gt;
&lt;li&gt;Destroy Spark Context&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Mining&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Scoring&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark Entropy Scorer&lt;/li&gt;
&lt;li&gt;Spark Numeric Scorer&lt;/li&gt;
&lt;li&gt;Spark Scorer&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Clustering&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark Cluster Assigner&lt;/li&gt;
&lt;li&gt;Spark k-Means&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Spark Collaborative Filtering Learner&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PMML&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark Compiled Model Predictor&lt;/li&gt;
&lt;li&gt;Spark MLlib to PMML&lt;/li&gt;
&lt;li&gt;Spark PMML Model Predictor&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Dimensionality Reduction&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark PCA&lt;/li&gt;
&lt;li&gt;Spark SVD&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Prediction&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark Decision Tree Learner&lt;/li&gt;
&lt;li&gt;Spark Gradient-Boosted Trees Learner&lt;/li&gt;
&lt;li&gt;Spark Linear Regression Learner&lt;/li&gt;
&lt;li&gt;Spark Linear SVM Learner&lt;/li&gt;
&lt;li&gt;Spark Logistic Regression Learner&lt;/li&gt;
&lt;li&gt;Spark Naive Bayes Learner&lt;/li&gt;
&lt;li&gt;Spark Predictor&lt;/li&gt;
&lt;li&gt;Spark Random Forests Learner&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Item Sets / Association Rules&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark Association Rule (Apply)&lt;/li&gt;
&lt;li&gt;Spark Association Rule Learner&lt;/li&gt;
&lt;li&gt;Spark Frequent Item Sets&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Views&lt;/h2&gt;
&lt;h3&gt;Spark Line Appender&lt;/h3&gt;
&lt;h3&gt;Radar Plot Appender&lt;/h3&gt;
&lt;h3&gt;Property&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Color Manager&lt;/li&gt;
&lt;li&gt;Size Manager&lt;/li&gt;
&lt;li&gt;Shape Manager&lt;/li&gt;
&lt;li&gt;Color Appender&lt;/li&gt;
&lt;li&gt;Size Appender&lt;/li&gt;
&lt;li&gt;Shape Appender&lt;/li&gt;
&lt;li&gt;Extract Color&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Box Plot&lt;/h3&gt;
&lt;h3&gt;Conditional Box Plot&lt;/h3&gt;
&lt;h3&gt;HiLite Table&lt;/h3&gt;
&lt;h3&gt;Histogram&lt;/h3&gt;
&lt;h3&gt;Histogram (interactive)&lt;/h3&gt;
&lt;h3&gt;Interactive Table&lt;/h3&gt;
&lt;h3&gt;Lift Chart&lt;/h3&gt;
&lt;h3&gt;Line Plot&lt;/h3&gt;
&lt;h3&gt;Parallel Coordinates&lt;/h3&gt;
&lt;h3&gt;Pie chart&lt;/h3&gt;
&lt;h3&gt;Pie chart (interactive)&lt;/h3&gt;
&lt;h3&gt;Scatter Matrix&lt;/h3&gt;
&lt;h3&gt;Scatter Plot&lt;/h3&gt;
&lt;h3&gt;Utility&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Renderer to Image&lt;/li&gt;
&lt;li&gt;String To SVG&lt;/li&gt;
&lt;li&gt;Image To Table&lt;/li&gt;
&lt;li&gt;Table To Image&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Reporting&lt;/h2&gt;
&lt;h3&gt;Data to Report&lt;/h3&gt;
&lt;h3&gt;Image to Report&lt;/h3&gt;
&lt;h2&gt;Analytics&lt;/h2&gt;
&lt;h3&gt;Mining&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Rule Induction&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Fuzzy Rules&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Fuzzy Rule Learner&lt;/li&gt;
&lt;li&gt;Fuzzy Rule Predictor&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Neural Network&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;MLP&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MultiLayerPerceptron Predictor&lt;/li&gt;
&lt;li&gt;RProp MLP Learner&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PNN&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PNN Learner (DDA)&lt;/li&gt;
&lt;li&gt;PNN Predictor&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Linear/Polynomial Regression&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Linear Regression Learner&lt;/li&gt;
&lt;li&gt;Polynomial Regression Learner&lt;/li&gt;
&lt;li&gt;Regression Predictor&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Misc Classifiers&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;K Nearest Neighbor&lt;/li&gt;
&lt;li&gt;K Nearest Neighbor (Distance Function)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Item Sets / Association Rules&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Association Rule Learner&lt;/li&gt;
&lt;li&gt;Create Bit Vector&lt;/li&gt;
&lt;li&gt;Subset Matcher&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Scoring&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Meta Nodes&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cross Validation&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Scorer&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;Numeric Scorer&lt;/li&gt;
&lt;li&gt;Entropy Scorer&lt;/li&gt;
&lt;li&gt;ROC Curve&lt;/li&gt;
&lt;li&gt;Enrichment Plotter&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Cross Validation&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;X-Partitioner&lt;/li&gt;
&lt;li&gt;X-Aggregator&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Logistic Regression&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Logistic Regression Learner&lt;/li&gt;
&lt;li&gt;Logistic Regression Predictor&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Bayes&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Naive Bayes Learner&lt;/li&gt;
&lt;li&gt;Naive Bayes Predictor&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Feature Selection&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Meta Nodes&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Backward Feature Elimination&lt;/li&gt;
&lt;li&gt;Forward Feature Selection&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Feature Selection Loop Start (1:1)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;Feature Selection Loop Start (2:2)&lt;/li&gt;
&lt;li&gt;Feature Selection Loop End&lt;/li&gt;
&lt;li&gt;Feature Selection Filter&lt;/li&gt;
&lt;li&gt;Linear Correlation&lt;/li&gt;
&lt;li&gt;Correlation Filter&lt;/li&gt;
&lt;li&gt;Low Variance Filter&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Decision Tree Ensemble&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Random Forest&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Random Forest Distance&lt;/li&gt;
&lt;li&gt;Tree Ensemble Model Extract&lt;/li&gt;
&lt;li&gt;Tree Ensemble Statistics&lt;/li&gt;
&lt;li&gt;Regression&lt;/li&gt;
&lt;li&gt;Classification&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Gradient Boosting&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Regression&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Gradient Boosted Trees Learner (Regression)&lt;/li&gt;
&lt;li&gt;Gradient Boosted Trees Predictor (Regression)&lt;/li&gt;
&lt;li&gt;PMML Gradient Boosted Trees Predictor (Regression)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Gradient Boosted Trees to PMML&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Classification&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Gradient Boosted Trees Learner&lt;/li&gt;
&lt;li&gt;Gradient Boosted Trees Predictor&lt;/li&gt;
&lt;li&gt;PMML Gradient Boosted Trees Predictor&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Decision Tree&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PMML Simple Regression Tree Predictor&lt;/li&gt;
&lt;li&gt;Simple Regression Tree Learner&lt;/li&gt;
&lt;li&gt;Simple Regression Tree Predictor&lt;/li&gt;
&lt;li&gt;Simple Regression Tree to PMML&lt;/li&gt;
&lt;li&gt;Decision Tree to Ruleset&lt;/li&gt;
&lt;li&gt;Decision Tree Learner&lt;/li&gt;
&lt;li&gt;Decision Tree Predictor&lt;/li&gt;
&lt;li&gt;Decision Tree To Image&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PCA&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PCA&lt;/li&gt;
&lt;li&gt;PCA Compute&lt;/li&gt;
&lt;li&gt;PCA Apply&lt;/li&gt;
&lt;li&gt;PCA Inversion&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Clustering&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DBSCAN&lt;/li&gt;
&lt;li&gt;k-Medoids&lt;/li&gt;
&lt;li&gt;Hierarchical Clustering (DistMatrix)&lt;/li&gt;
&lt;li&gt;Hierarchical Cluster View&lt;/li&gt;
&lt;li&gt;Hierarchical Cluster Assigner&lt;/li&gt;
&lt;li&gt;Cluster Assigner&lt;/li&gt;
&lt;li&gt;Fuzzy c-Means&lt;/li&gt;
&lt;li&gt;Hierarchical Clustering&lt;/li&gt;
&lt;li&gt;SOTA Learner&lt;/li&gt;
&lt;li&gt;SOTA Predictor&lt;/li&gt;
&lt;li&gt;k-Means&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ensemble Learning&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Boosting Learner Loop End&lt;/li&gt;
&lt;li&gt;Boosting Learner Loop Start&lt;/li&gt;
&lt;li&gt;Boosting Predictor Loop End&lt;/li&gt;
&lt;li&gt;Boosting Predictor Loop Start&lt;/li&gt;
&lt;li&gt;Cell To Model&lt;/li&gt;
&lt;li&gt;Model Loop End&lt;/li&gt;
&lt;li&gt;Model Loop Start&lt;/li&gt;
&lt;li&gt;Model to Cell&lt;/li&gt;
&lt;li&gt;Prediction Fusion&lt;/li&gt;
&lt;li&gt;Voting Loop End&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Meta Nodes&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Bagging&lt;/li&gt;
&lt;li&gt;Boosting Learner&lt;/li&gt;
&lt;li&gt;Boosting Predictor&lt;/li&gt;
&lt;li&gt;Delegating&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PMML&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PMML Ensemble Loop End&lt;/li&gt;
&lt;li&gt;PMML Ensemble Predictor&lt;/li&gt;
&lt;li&gt;PMML Ensemble to Table&lt;/li&gt;
&lt;li&gt;Table to PMML Ensemble&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MDS&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MDS (DistMatrix)&lt;/li&gt;
&lt;li&gt;MDS Projection (DistMatrix)&lt;/li&gt;
&lt;li&gt;MDS&lt;/li&gt;
&lt;li&gt;MDS Projection&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SVM&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SVM Learner&lt;/li&gt;
&lt;li&gt;SVM Predictor&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PMML&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PMML Predictor&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Distance Calculation&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Distance Matrix&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Distance Matrix Reader&lt;/li&gt;
&lt;li&gt;Distance Matrix Writer&lt;/li&gt;
&lt;li&gt;Distance Matrix Calculate&lt;/li&gt;
&lt;li&gt;Distance Matrix Pair Extractor&lt;/li&gt;
&lt;li&gt;Similarity Search&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Distance Functions&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Numeric Distances&lt;/li&gt;
&lt;li&gt;String Distances&lt;/li&gt;
&lt;li&gt;Bit Vector Distances&lt;/li&gt;
&lt;li&gt;Byte Vector Distances&lt;/li&gt;
&lt;li&gt;Mahalanobis Distance&lt;/li&gt;
&lt;li&gt;Matrix Distance&lt;/li&gt;
&lt;li&gt;Aggregated Distance&lt;/li&gt;
&lt;li&gt;Java Distance&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Statistics&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Crosstab&lt;/li&gt;
&lt;li&gt;Value Counter&lt;/li&gt;
&lt;li&gt;Linear Correlation&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Spark Node Demo&lt;/h2&gt;
&lt;h3&gt;Spark on Hadoop&lt;/h3&gt;
&lt;p&gt;&lt;img alt="2019-06-21-18-03-17" src="http://xixuebin-blog-images.oss-cn-beijing.aliyuncs.com/xixuebin-blog-images.oss-cn-beijing.aliyuncs.com/images/d623f1e4a074694948d241eddcfd7cda.png"&gt;&lt;/p&gt;
&lt;p&gt;This workflow demonstrates the usage of the Spark MLlib Decision Tree Learner and Spark Predictor. It also demonstrates the conversion of categorical columns into numerical columns which is necessary since the MLlib algorithms only support numerical features and labels.&lt;/p&gt;
&lt;p&gt;Requirements:
- KNIME Analytics Platform
    + KNIME Extension for Apache Spark
- Hadoop Cluster e.g. Hortonworks Sandbox (http://hortonworks.com/products/hortonworks-sandbox/)
    + Spark Job Server needs to be installed and configured
    + Apache Spark 1.2.1 to 2.2
For details see https://www.knime.org/knime-spark-executor&lt;/p&gt;
&lt;h3&gt;hive to spark to hive&lt;/h3&gt;
&lt;p&gt;&lt;img alt="2019-06-21-18-17-07" src="http://xixuebin-blog-images.oss-cn-beijing.aliyuncs.com/xixuebin-blog-images.oss-cn-beijing.aliyuncs.com/images/03a59830f72d0202a20544231118d7e8.png"&gt;&lt;/p&gt;
&lt;p&gt;This workflow demonstrates the usage of the Hive to Spark and Spark to Hive nodes that allow you to transfer data between Apache Spark and Apache Hive.&lt;/p&gt;
&lt;p&gt;Requirements:
- KNIME Analytics Platform
    + KNIME Big Data Connectors
    + KNIME extension for Apache Spark
- Hadoop Cluster e.g. Hortonworks Sandbox (http://hortonworks.com/products/hortonworks-sandbox/)
    + Spark Job Server needs to be installed and configured
    + Apache Spark 1.2.1 to 2.2
For details see https://www.knime.org/knime-spark-executor and
https://www.knime.org/knime-big-data-connectors&lt;/p&gt;
&lt;h3&gt;Comprehensive Model Learning Mass Prediction&lt;/h3&gt;
&lt;p&gt;&lt;img alt="2019-06-21-19-04-32" src="http://xixuebin-blog-images.oss-cn-beijing.aliyuncs.com/xixuebin-blog-images.oss-cn-beijing.aliyuncs.com/images/de973d6d1b357b57b90339aaec169358.png"&gt;&lt;/p&gt;
&lt;p&gt;This workflow demonstrates the usage of the Spark Compiled Model Predictor node which converts a given PMML model into machine code and uses the compiled model to predict vast amounts of data in parallel within Apache Spark.&lt;/p&gt;
&lt;p&gt;Requirements:
- KNIME Analytics Platform
    + KNIME Ensemble Learning Wrappers
    + KNIME Extension for Apache Spark
- Hadoop Cluster e.g. Hortonworks Sandbox (http://hortonworks.com/products/hortonworks-sandbox/)
    + Spark Job Server needs to be installed and configured
    + Apache Spark 1.2.1 to 2.2
For details see https://www.knime.org/knime-spark-executor  &lt;/p&gt;
&lt;p&gt;&lt;em&gt;XMind: ZEN - Trial Version&lt;/em&gt;&lt;/p&gt;</content><category term="bigdata"></category><category term="knime"></category></entry><entry><title>Debezium介绍和使用</title><link href="xixuebin.github.io/2019-05-30-141229-ch.html" rel="alternate"></link><published>2019-05-30T14:12:29+08:00</published><updated>2019-05-30T14:12:29+08:00</updated><author><name>kevin.xi</name></author><id>tag:None,2019-05-30:xixuebin.github.io/2019-05-30-141229-ch.html</id><summary type="html">&lt;p&gt;Summary&lt;/p&gt;</summary><content type="html">&lt;!-- https://code.visualstudio.com/docs/editor/userdefinedsnippets --&gt;

&lt;h1&gt;介绍&lt;/h1&gt;
&lt;h2&gt;什么是Debezium&lt;/h2&gt;
&lt;p&gt;Debezium是一个开源项目，为捕获数据更改(change data capture,CDC)提供了一个低延迟的流式处理平台。你可以安装并且配置Debezium去监控你的数据库，然后你的应用就可以消费对数据库的每一个行级别(row-level)的更改。只有已提交的更改才是可见的，所以你的应用不用担心事务(transaction)或者更改被回滚(roll back)。Debezium为所有的数据库更改事件提供了一个统一的模型，所以你的应用不用担心每一种数据库管理系统的错综复杂性。另外，由于Debezium用持久化的、有副本备份的日志来记录数据库数据变化的历史，因此，你的应用可以随时停止再重启，而不会错过它停止运行时发生的事件，保证了所有的事件都能被正确地、完全地处理掉。&lt;/p&gt;
&lt;p&gt;监控数据库，并且在数据变动的时候获得通知一直是很复杂的事情。关系型数据库的触发器可以做到，但是只对特定的数据库有效，而且通常只能更新数据库内的状态(无法和外部的进程通信)。一些数据库提供了监控数据变动的API或者框架，但是没有一个标准，每种数据库的实现方式都是不同的，并且需要大量特定的知识和理解特定的代码才能运用。确保以相同的顺序查看和处理所有更改，同时最小化影响数据库仍然非常具有挑战性。&lt;/p&gt;
&lt;p&gt;Debezium提供了模块为你做这些复杂的工作。一些模块是通用的，并且能够适用多种数据库管理系统，但在功能和性能方面仍有一些限制。另一些模块是为特定的数据库管理系统定制的，所以他们通常可以更多地利用数据库系统本身的特性来提供更多功能。&lt;/p&gt;
&lt;h2&gt;基础架构&lt;/h2&gt;
&lt;p&gt;Debezium是一个捕获数据更改(CDC)平台，并且利用Kafka和Kafka Connect实现了自己的持久性、可靠性和容错性。每一个部署在Kafka Connect分布式的、可扩展的、容错性的服务中的connector监控一个上游数据库服务器，捕获所有的数据库更改，然后记录到一个或者多个Kafka topic(通常一个数据库表对应一个kafka topic)。Kafka确保所有这些数据更改事件都能够多副本并且总体上有序(Kafka只能保证一个topic的单个分区内有序)，这样，更多的客户端可以独立消费同样的数据更改事件而对上游数据库系统造成的影响降到很小(如果N个应用都直接去监控数据库更改，对数据库的压力为N，而用debezium汇报数据库更改事件到kafka，所有的应用都去消费kafka中的消息，可以把对数据库的压力降到1)。另外，客户端可以随时停止消费，然后重启，从上次停止消费的地方接着消费。每个客户端可以自行决定他们是否需要exactly-once或者at-least-once消息交付语义保证，并且所有的数据库或者表的更改事件是按照上游数据库发生的顺序被交付的。&lt;/p&gt;
&lt;p&gt;对于不需要或者不想要这种容错级别、性能、可扩展性、可靠性的应用，他们可以使用内嵌的Debezium connector引擎来直接在应用内部运行connector。这种应用仍需要消费数据库更改事件，但更希望connector直接传递给它，而不是持久化到Kafka里。&lt;/p&gt;
&lt;h2&gt;常见使用场景&lt;/h2&gt;
&lt;h3&gt;缓存失效(Cache invalidation)&lt;/h3&gt;
&lt;p&gt;在缓存中缓存的条目(entry)在源头被更改或者被删除的时候立即让缓存中的条目失效。如果缓存在一个独立的进程中运行(例如Redis，Memcache，Infinispan或者其他的)，那么简单的缓存失效逻辑可以放在独立的进程或服务中，从而简化主应用的逻辑。在一些场景中，缓存失效逻辑可以更复杂一点，让它利用更改事件中的更新数据去更新缓存中受影响的条目。&lt;/p&gt;
&lt;h3&gt;简化单体应用(Simplifying monolithic applications)&lt;/h3&gt;
&lt;p&gt;许多应用更新数据库，然后在数据库中的更改被提交后，做一些额外的工作：更新搜索索引，更新缓存，发送通知，运行业务逻辑，等等。这种情况通常称为双写(dual-writes)，因为应用没有在一个事务内写多个系统。这样不仅应用逻辑复杂难以维护，而且双写容易丢失数据或者在一些系统更新成功而另一些系统没有更新成功的时候造成不同系统之间的状态不一致。使用捕获更改数据技术(change data capture,CDC)，在源数据库的数据更改提交后，这些额外的工作可以被放在独立的线程或者进程(服务)中完成。这种实现方式的容错性更好，不会丢失事件，容易扩展，并且更容易支持升级。&lt;/p&gt;
&lt;h3&gt;共享数据库(Sharing databases)&lt;/h3&gt;
&lt;p&gt;当多个应用共用同一个数据库的时候，一个应用提交的更改通常要被另一个应用感知到。一种实现方式是使用消息总线，尽管非事务性(non-transactional)的消息总线总会受上面提到的双写(dual-writes)影响。但是，另一种实现方式，即Debezium，变得很直接：每个应用可以直接监控数据库的更改，并且响应更改。&lt;/p&gt;
&lt;h3&gt;数据集成(Data integration)&lt;/h3&gt;
&lt;p&gt;数据通常被存储在多个地方，尤其是当数据被用于不同的目的的时候，会有不同的形式。保持多系统的同步是很有挑战性的，但是可以通过使用Debezium加上简单的事件处理逻辑来实现简单的ETL类型的解决方案.&lt;/p&gt;
&lt;h3&gt;命令查询职责分离&lt;/h3&gt;
&lt;p&gt;在命令查询职责分离(Command Query Responsibility Separation,CQRS)架构模式中，更新数据使用了一种数据模型，读数据使用了一种或者多种数据模型。由于数据更改被记录在更新侧(update-side)，这些更改将被处理以更新各种读展示。所以CQRS应用通常更复杂，尤其是他们需要保证可靠性和全序(totally-ordered)处理。Debezium和CDC可以使这种方式更可行：写操作被正常记录，但是Debezium捕获数据更改，并且持久化到全序流里，然后供那些需要异步更新只读视图的服务消费。写侧(write-side)表可以表示面向领域的实体(domain-oriented entities)，或者当CQRS和Event Sourcing结合的时候，写侧表仅仅用做追加操作命令事件的日志。&lt;/p&gt;
&lt;h1&gt;Debezium:kafka 连接器配置&lt;/h1&gt;
&lt;p&gt;kafka提供两种连接器&lt;/p&gt;
&lt;h2&gt;&lt;code&gt;connect-standalone.sh&lt;/code&gt;用于测试开发&lt;/h2&gt;
&lt;h2&gt;&lt;code&gt;connect-distributed.sh&lt;/code&gt;用于正式环境线上&lt;/h2&gt;
&lt;h3&gt;distributed模式常用API&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;GET /connectors
&lt;span class="c1"&gt;# return a list of active connectors 返回活跃的connectors&lt;/span&gt;

POST /connectors
&lt;span class="c1"&gt;#create a new connector; the request body should be a JSON object containing a string name field and an object config field with the connector configuration parameters  创建一个新的connector&lt;/span&gt;

GET /connectors/&lt;span class="o"&gt;{&lt;/span&gt;name&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="c1"&gt;#get information about a specific connector 获取指定connetor的信息&lt;/span&gt;

GET /connectors/&lt;span class="o"&gt;{&lt;/span&gt;name&lt;span class="o"&gt;}&lt;/span&gt;/config
&lt;span class="c1"&gt;#get the configuration parameters for a specific connector 获取指定connector的配置信息&lt;/span&gt;

PUT /connectors/&lt;span class="o"&gt;{&lt;/span&gt;name&lt;span class="o"&gt;}&lt;/span&gt;/config
&lt;span class="c1"&gt;#update the configuration parameters for a specific connector 更新指定connector的配置信息&lt;/span&gt;

GET /connectors/&lt;span class="o"&gt;{&lt;/span&gt;name&lt;span class="o"&gt;}&lt;/span&gt;/status
&lt;span class="c1"&gt;#get current status of the connector, including if it is running, failed, paused, etc., which worker it is assigned to, error information if it has failed, and the state of all its tasks 获取指定connector状态&lt;/span&gt;

GET /connectors/&lt;span class="o"&gt;{&lt;/span&gt;name&lt;span class="o"&gt;}&lt;/span&gt;/tasks
&lt;span class="c1"&gt;#get a list of tasks currently running for a connector 获取指定connector正在运行的task&lt;/span&gt;

GET /connectors/&lt;span class="o"&gt;{&lt;/span&gt;name&lt;span class="o"&gt;}&lt;/span&gt;/tasks/&lt;span class="o"&gt;{&lt;/span&gt;taskid&lt;span class="o"&gt;}&lt;/span&gt;/status
&lt;span class="c1"&gt;#get current status of the task, including if it is running, failed, paused, etc., which worker it is assigned to, and error information if it has failed 获取指定connector的task状态信息&lt;/span&gt;

PUT /connectors/&lt;span class="o"&gt;{&lt;/span&gt;name&lt;span class="o"&gt;}&lt;/span&gt;/pause
&lt;span class="c1"&gt;#pause the connector and its tasks, which stops message processing until the connector is resumed 暂停connector和它的task&lt;/span&gt;

PUT /connectors/&lt;span class="o"&gt;{&lt;/span&gt;name&lt;span class="o"&gt;}&lt;/span&gt;/resume
&lt;span class="c1"&gt;#resume a paused connector (or do nothing if the connector is not paused) 恢复一个被暂停的connector&lt;/span&gt;

POST /connectors/&lt;span class="o"&gt;{&lt;/span&gt;name&lt;span class="o"&gt;}&lt;/span&gt;/restart
&lt;span class="c1"&gt;#restart a connector (typically because it has failed) 重启一个connector &lt;/span&gt;

POST /connectors/&lt;span class="o"&gt;{&lt;/span&gt;name&lt;span class="o"&gt;}&lt;/span&gt;/tasks/&lt;span class="o"&gt;{&lt;/span&gt;taskId&lt;span class="o"&gt;}&lt;/span&gt;/restart
&lt;span class="c1"&gt;#restart an individual task (typically because it has failed) 重启一个task&lt;/span&gt;

DELETE /connectors/&lt;span class="o"&gt;{&lt;/span&gt;name&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="c1"&gt;#delete a connector, halting all tasks and deleting its configuration 删除一个connector&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;参考&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://blog.csdn.net/sweatOtt/article/details/82430724"&gt;https://blog.csdn.net/sweatOtt/article/details/82430724&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://debezium.io/docs/connectors/mysql/"&gt;https://debezium.io/docs/connectors/mysql/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://cloud.tencent.com/developer/article/1406851"&gt;https://cloud.tencent.com/developer/article/1406851&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.confluent.io/current/connect/references/restapi.html"&gt;https://docs.confluent.io/current/connect/references/restapi.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.csdn.net/lzufeng/article/details/81606825"&gt;Debezium的MySQL连接器的工作原理&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="bigdata"></category><category term="debezium"></category></entry><entry><title>Redash环境搭建及二次开发</title><link href="xixuebin.github.io/2019-05-28-103541-ch.html" rel="alternate"></link><published>2019-05-28T10:35:41+08:00</published><updated>2019-05-28T10:35:41+08:00</updated><author><name>kevin.xi</name></author><id>tag:None,2019-05-28:xixuebin.github.io/2019-05-28-103541-ch.html</id><summary type="html">&lt;p&gt;Summary&lt;/p&gt;</summary><content type="html">&lt;!-- https://code.visualstudio.com/docs/editor/userdefinedsnippets --&gt;

&lt;blockquote&gt;
&lt;p&gt;Redash 是一款开源的 BI 工具，提供了基于 web 的数据库查询和数据可视化功能。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;Mac安装redash依赖&lt;/h1&gt;
&lt;p&gt;Redash依赖redis和postgres作为缓存和元数据存储,所以在部署之前先要安装Redis和PostgreSQL&lt;/p&gt;
&lt;h2&gt;mac安装redis&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;brew install redis
brew services start redis //启动redis
brew services stop redis
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;mac安装postgreSQL&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;brew install postgresql
brew services start postgresq
initdb /usr/local/var/postgre //初始化数据库
brew services restart postgresql //重启数据库
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;安装&lt;/h1&gt;
&lt;h2&gt;安装python依赖包&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pip install -r requirements.txt -r requirements_dev.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;安装nodejs的包&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;npm install  //安装node的包
npm run build //进行一次完整build
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;配置&lt;/h2&gt;
&lt;p&gt;在开发环境中,使用默认的配置能满足绝大多数的需求,如果要覆盖默认配置.需要在redash的根目录下设置一个.env文件,在该文件中设置环境变量,覆盖默认的.&lt;/p&gt;
&lt;p&gt;查看所有变量&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;bin/run ./manage.py check_settings
&lt;span class="nv"&gt;JSON_AS_ASCII&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; True
&lt;span class="nv"&gt;AUTH_TYPE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; api_key
&lt;span class="nv"&gt;MAIL_DEFAULT_SENDER&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;RATELIMIT_STRATEGY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; fixed-window
&lt;span class="nv"&gt;FEATURE_AUTO_PUBLISH_NAMED_QUERIES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; True
&lt;span class="nv"&gt;HSTS_MAX_AGE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;31556926&lt;/span&gt;
&lt;span class="nv"&gt;ENFORCE_HTTPS_PERMANENT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;SESSION_REFRESH_EACH_REQUEST&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; True
&lt;span class="nv"&gt;CELERY_BROKER&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; redis://localhost:6379/0
&lt;span class="nv"&gt;REDIS_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; redis://localhost:6379/0
&lt;span class="nv"&gt;TIME_FORMAT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; HH:mm
&lt;span class="nv"&gt;SQLALCHEMY_COMMIT_ON_TEARDOWN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;ALLOW_PARAMETERS_IN_EMBEDS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;JOB_EXPIRY_TIME&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;43200&lt;/span&gt;
&lt;span class="nv"&gt;SQLALCHEMY_TRACK_MODIFICATIONS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;KYLIN_OFFSET&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="nv"&gt;LDAP_SEARCH_TEMPLATE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;cn&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;%&lt;span class="o"&gt;(&lt;/span&gt;username&lt;span class="o"&gt;)&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;QLOUD_AUTHORIZE_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; https://yourauthn.com/oauth2.0/authorize
&lt;span class="nv"&gt;COOKIES_SECURE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;MAIL_MAX_EMAILS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;REMEMBER_COOKIE_SECURE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;SENTRY_DSN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="nv"&gt;VERSION_CHECK&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; True
&lt;span class="nv"&gt;STATSD_HOST&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1
&lt;span class="nv"&gt;QUERY_RESULTS_CLEANUP_ENABLED&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; True
&lt;span class="nv"&gt;REMEMBER_COOKIE_HTTPONLY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; True
&lt;span class="nv"&gt;MULTI_ORG&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;LOG_FORMAT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;%&lt;span class="o"&gt;(&lt;/span&gt;asctime&lt;span class="o"&gt;)&lt;/span&gt;s&lt;span class="o"&gt;][&lt;/span&gt;PID:%&lt;span class="o"&gt;(&lt;/span&gt;process&lt;span class="o"&gt;)&lt;/span&gt;d&lt;span class="o"&gt;][&lt;/span&gt;%&lt;span class="o"&gt;(&lt;/span&gt;levelname&lt;span class="o"&gt;)&lt;/span&gt;s&lt;span class="o"&gt;][&lt;/span&gt;%&lt;span class="o"&gt;(&lt;/span&gt;name&lt;span class="o"&gt;)&lt;/span&gt;s&lt;span class="o"&gt;]&lt;/span&gt; %&lt;span class="o"&gt;(&lt;/span&gt;message&lt;span class="o"&gt;)&lt;/span&gt;s
&lt;span class="nv"&gt;RATELIMIT_SWALLOW_ERRORS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;QLOUD_ACCESS_TOKEN_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; https://yourauthn.com/oauth2.0/accessToken
&lt;span class="nv"&gt;FRAME_OPTIONS_ALLOW_FROM&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="nv"&gt;RATELIMIT_HEADER_LIMIT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; X-RateLimit-Limit
&lt;span class="nv"&gt;JSONIFY_MIMETYPE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; application/json
&lt;span class="nv"&gt;PROXIES_COUNT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="nv"&gt;QLOUD_OAUTH_ENABLED&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; True
&lt;span class="nv"&gt;ACCESS_CONTROL_REQUEST_METHOD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; GET, POST, PUT
&lt;span class="nv"&gt;ACCESS_CONTROL_ALLOW_ORIGIN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; set&lt;span class="o"&gt;([])&lt;/span&gt;
&lt;span class="nv"&gt;EVENT_REPORTING_WEBHOOKS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[]&lt;/span&gt;
&lt;span class="nv"&gt;RATELIMIT_HEADERS_ENABLED&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;RATELIMIT_HEADER_RESET&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; X-RateLimit-Reset
&lt;span class="nv"&gt;ENFORCE_FILE_SAVE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; True
&lt;span class="nv"&gt;LDAP_LOGIN_ENABLED&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;HSTS_ENABLED&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;LIMITER_STORAGE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; redis://localhost:6379/0
&lt;span class="nv"&gt;STATSD_USE_TAGS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;DATE_FORMAT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; DD/MM/YY
&lt;span class="nv"&gt;DASHBOARD_REFRESH_INTERVALS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;60&lt;/span&gt;, &lt;span class="m"&gt;300&lt;/span&gt;, &lt;span class="m"&gt;600&lt;/span&gt;, &lt;span class="m"&gt;1800&lt;/span&gt;, &lt;span class="m"&gt;3600&lt;/span&gt;, &lt;span class="m"&gt;43200&lt;/span&gt;, &lt;span class="m"&gt;86400&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;FEATURE_POLICY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="nv"&gt;CELERY_RESULT_EXPIRES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;14400&lt;/span&gt;
&lt;span class="nv"&gt;DATASOURCE_SECRET_KEY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; c292a0a3aa32397cdb050e233733900f
&lt;span class="nv"&gt;FEATURE_SHOW_QUERY_RESULTS_COUNT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; True
&lt;span class="nv"&gt;SESSION_COOKIE_DOMAIN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;SESSION_COOKIE_NAME&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; session
&lt;span class="nv"&gt;REMOTE_USER_LOGIN_ENABLED&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;CONTENT_SECURITY_POLICY_REPORT_ONLY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;HOST&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="nv"&gt;LOGGER_HANDLER_POLICY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; always
&lt;span class="nv"&gt;SQLALCHEMY_RECORD_QUERIES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;QLOUD_CLIENT_ID&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; qloud10070901oauth21
&lt;span class="nv"&gt;ALERTS_DEFAULT_MAIL_SUBJECT_TEMPLATE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;({&lt;/span&gt;state&lt;span class="o"&gt;})&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;alert_name&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="nv"&gt;MAIL_USE_SSL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;QLOUD_AUTH_STOMP_PORT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;61613&lt;/span&gt;
&lt;span class="nv"&gt;GOOGLE_CLIENT_ID&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="nv"&gt;SQLALCHEMY_NATIVE_UNICODE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;MAX_CONTENT_LENGTH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;LDAP_HOST_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;LDAP_SEARCH_DN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;QUERY_RESULTS_CLEANUP_MAX_AGE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;7&lt;/span&gt;
&lt;span class="nv"&gt;PERMANENT_SESSION_LIFETIME&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;31&lt;/span&gt; days, &lt;span class="m"&gt;0&lt;/span&gt;:00:00
&lt;span class="nv"&gt;PAGE_SIZE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;20&lt;/span&gt;
&lt;span class="nv"&gt;QLOUD_CLIENT_SECRET&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; OUO10070901JN32rewffFE3
&lt;span class="nv"&gt;SQLALCHEMY_MAX_OVERFLOW&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;QLOUD_BASE_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; https://yourauthn.com
&lt;span class="nv"&gt;LDAP_SSL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;TRAP_HTTP_EXCEPTIONS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;FEATURE_ALLOW_CUSTOM_JS_VISUALIZATIONS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;REMOTE_USER_HEADER&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; X-Forwarded-Remote-User
&lt;span class="nv"&gt;LDAP_BIND_DN_PASSWORD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="nv"&gt;PRESERVE_CONTEXT_ON_EXCEPTION&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;BIGQUERY_HTTP_TIMEOUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;600&lt;/span&gt;
&lt;span class="nv"&gt;ENFORCE_HTTPS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;SQLALCHEMY_ECHO&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;STATIC_ASSETS_PATH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; /Users/xixuebin/PycharmProjects/huaruan/qloud-redash/redash/settings/../../client/dist/
&lt;span class="nv"&gt;CONTENT_SECURITY_POLICY_REPORT_URI&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="nv"&gt;SESSION_COOKIE_PATH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;QLOUD_AUTH_STOMP_ADDRESS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; qloudstomp.service.sd
&lt;span class="nv"&gt;ACCESS_CONTROL_ALLOW_CREDENTIALS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;SQLPARSE_FORMAT_OPTIONS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;keyword_case&amp;#39;&lt;/span&gt;: &lt;span class="s1"&gt;&amp;#39;upper&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;reindent&amp;#39;&lt;/span&gt;: True&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="nv"&gt;GOOGLE_CLIENT_SECRET&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="nv"&gt;ACCESS_CONTROL_ALLOW_HEADERS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; Content-Type
&lt;span class="nv"&gt;LDAP_AUTH_METHOD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; SIMPLE
&lt;span class="nv"&gt;LDAP_DISPLAY_NAME_KEY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; displayName
&lt;span class="nv"&gt;HSTS_PRELOAD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;LOGGER_NAME&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; redash.app
&lt;span class="nv"&gt;KYLIN_LIMIT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;50000&lt;/span&gt;
&lt;span class="nv"&gt;LDAP_BIND_DN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;QUERY_RESULTS_CLEANUP_COUNT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;100&lt;/span&gt;
&lt;span class="nv"&gt;SECRET_KEY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; c292a0a3aa32397cdb050e233733900f
&lt;span class="nv"&gt;CONTENT_SECURITY_POLICY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; default-src &lt;span class="s1"&gt;&amp;#39;self&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; style-src &lt;span class="s1"&gt;&amp;#39;self&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;unsafe-inline&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; script-src &lt;span class="s1"&gt;&amp;#39;self&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;unsafe-eval&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; font-src &lt;span class="s1"&gt;&amp;#39;self&amp;#39;&lt;/span&gt; data:&lt;span class="p"&gt;;&lt;/span&gt; img-src &lt;span class="s1"&gt;&amp;#39;self&amp;#39;&lt;/span&gt; http: https: data:&lt;span class="p"&gt;;&lt;/span&gt; object-src &lt;span class="s1"&gt;&amp;#39;none&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; frame-ancestors &lt;span class="s1"&gt;&amp;#39;none&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; frame-src redash.io&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nv"&gt;QLOUD_AUTH_DOMAIN_CHECK&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; True
&lt;span class="nv"&gt;STATSD_PREFIX&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; redash
&lt;span class="nv"&gt;LOG_LEVEL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; INFO
&lt;span class="nv"&gt;APPLICATION_ROOT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;SERVER_NAME&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;LDAP_CUSTOM_USERNAME_PROMPT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; LDAP/AD/SSO username:
&lt;span class="nv"&gt;PREFERRED_URL_SCHEME&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; http
&lt;span class="nv"&gt;TESTING&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;TEMPLATES_AUTO_RELOAD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;MAIL_USERNAME&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;SCHEMAS_REFRESH_SCHEDULE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;30&lt;/span&gt;
&lt;span class="nv"&gt;CELERYD_WORKER_LOG_FORMAT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;%&lt;span class="o"&gt;(&lt;/span&gt;asctime&lt;span class="o"&gt;)&lt;/span&gt;s&lt;span class="o"&gt;][&lt;/span&gt;PID:%&lt;span class="o"&gt;(&lt;/span&gt;process&lt;span class="o"&gt;)&lt;/span&gt;d&lt;span class="o"&gt;][&lt;/span&gt;%&lt;span class="o"&gt;(&lt;/span&gt;levelname&lt;span class="o"&gt;)&lt;/span&gt;s&lt;span class="o"&gt;][&lt;/span&gt;%&lt;span class="o"&gt;(&lt;/span&gt;processName&lt;span class="o"&gt;)&lt;/span&gt;s&lt;span class="o"&gt;]&lt;/span&gt; %&lt;span class="o"&gt;(&lt;/span&gt;message&lt;span class="o"&gt;)&lt;/span&gt;s
&lt;span class="nv"&gt;ALLOW_SCRIPTS_IN_USER_INPUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;FRAME_OPTIONS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; deny
&lt;span class="nv"&gt;SQLALCHEMY_POOL_TIMEOUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;MAIL_ASCII_ATTACHMENTS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;MAIL_SERVER&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; localhost
&lt;span class="nv"&gt;QLOUD_AUTH_DOMAIN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;redash.com&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;QLOUD_PROFILE_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; https://yourauthn.com/oauth2.0/profile?access_token&lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="nv"&gt;RATELIMIT_HEADER_REMAINING&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; X-RateLimit-Remaining
&lt;span class="nv"&gt;RATELIMIT_HEADER_RETRY_AFTER&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; Retry-After
&lt;span class="nv"&gt;LDAP_EMAIL_KEY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; mail
&lt;span class="nv"&gt;USE_X_SENDFILE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;GOOGLE_OAUTH_ENABLED&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;SQLALCHEMY_DATABASE_URI&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; postgresql:///postgres
&lt;span class="nv"&gt;SQLALCHEMY_DISABLE_POOL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;MAIL_USE_TLS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;SESSION_COOKIE_SECURE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;SCHEMA_RUN_TABLE_SIZE_CALCULATIONS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;SQLALCHEMY_BINDS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;PAGE_SIZE_OPTIONS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;, &lt;span class="m"&gt;10&lt;/span&gt;, &lt;span class="m"&gt;20&lt;/span&gt;, &lt;span class="m"&gt;50&lt;/span&gt;, &lt;span class="m"&gt;100&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;LOG_STDOUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;TABLE_CELL_MAX_JSON_SIZE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;50000&lt;/span&gt;
&lt;span class="nv"&gt;QLOUD_USERS_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; http://qmsauthz.pditdop.service.sd/users
&lt;span class="nv"&gt;KYLIN_ACCEPT_PARTIAL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;DEBUG&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;FEATURE_DISABLE_REFRESH_QUERIES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;QUERY_REFRESH_INTERVALS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;60&lt;/span&gt;, &lt;span class="m"&gt;300&lt;/span&gt;, &lt;span class="m"&gt;600&lt;/span&gt;, &lt;span class="m"&gt;900&lt;/span&gt;, &lt;span class="m"&gt;1800&lt;/span&gt;, &lt;span class="m"&gt;3600&lt;/span&gt;, &lt;span class="m"&gt;7200&lt;/span&gt;, &lt;span class="m"&gt;10800&lt;/span&gt;, &lt;span class="m"&gt;14400&lt;/span&gt;, &lt;span class="m"&gt;18000&lt;/span&gt;, &lt;span class="m"&gt;21600&lt;/span&gt;, &lt;span class="m"&gt;25200&lt;/span&gt;, &lt;span class="m"&gt;28800&lt;/span&gt;, &lt;span class="m"&gt;32400&lt;/span&gt;, &lt;span class="m"&gt;36000&lt;/span&gt;, &lt;span class="m"&gt;39600&lt;/span&gt;, &lt;span class="m"&gt;43200&lt;/span&gt;, &lt;span class="m"&gt;86400&lt;/span&gt;, &lt;span class="m"&gt;604800&lt;/span&gt;, &lt;span class="m"&gt;1209600&lt;/span&gt;, &lt;span class="m"&gt;2592000&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;EXPLAIN_TEMPLATE_LOADING&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;THROTTLE_LOGIN_PATTERN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;50&lt;/span&gt;/hour
&lt;span class="nv"&gt;CELERY_RESULT_BACKEND&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; redis://localhost:6379/0
&lt;span class="nv"&gt;DESTINATIONS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;redash.destinations.email&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.destinations.slack&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.destinations.webhook&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.destinations.hipchat&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.destinations.mattermost&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.destinations.chatwork&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.destinations.pagerduty&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.destinations.hangoutschat&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;SCHEMAS_REFRESH_QUEUE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; celery
&lt;span class="nv"&gt;SQLALCHEMY_POOL_RECYCLE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;CELERYD_WORKER_TASK_LOG_FORMAT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;%&lt;span class="o"&gt;(&lt;/span&gt;asctime&lt;span class="o"&gt;)&lt;/span&gt;s&lt;span class="o"&gt;][&lt;/span&gt;PID:%&lt;span class="o"&gt;(&lt;/span&gt;process&lt;span class="o"&gt;)&lt;/span&gt;d&lt;span class="o"&gt;][&lt;/span&gt;%&lt;span class="o"&gt;(&lt;/span&gt;levelname&lt;span class="o"&gt;)&lt;/span&gt;s&lt;span class="o"&gt;][&lt;/span&gt;%&lt;span class="o"&gt;(&lt;/span&gt;processName&lt;span class="o"&gt;)&lt;/span&gt;s&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="nv"&gt;task_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;%&lt;span class="o"&gt;(&lt;/span&gt;task_name&lt;span class="o"&gt;)&lt;/span&gt;s &lt;span class="nv"&gt;task_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;%&lt;span class="o"&gt;(&lt;/span&gt;task_id&lt;span class="o"&gt;)&lt;/span&gt;s %&lt;span class="o"&gt;(&lt;/span&gt;message&lt;span class="o"&gt;)&lt;/span&gt;s
&lt;span class="nv"&gt;LOG_PREFIX&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="nv"&gt;RATELIMIT_ENABLED&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; True
&lt;span class="nv"&gt;MAIL_PASSWORD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;QLOUD_LOGOUT_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; https://yourauthn.com/logout?service&lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="nv"&gt;JSONIFY_PRETTYPRINT_REGULAR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; True
&lt;span class="nv"&gt;SQLALCHEMY_POOL_SIZE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;PROPAGATE_EXCEPTIONS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; None
&lt;span class="nv"&gt;TRAP_BAD_REQUEST_ERRORS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;span class="nv"&gt;STATSD_PORT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;8125&lt;/span&gt;
&lt;span class="nv"&gt;JSON_SORT_KEYS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; True
&lt;span class="nv"&gt;SESSION_COOKIE_HTTPONLY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; True
&lt;span class="nv"&gt;SEND_FILE_MAX_AGE_DEFAULT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;12&lt;/span&gt;:00:00
&lt;span class="nv"&gt;MAIL_PORT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;25&lt;/span&gt;
&lt;span class="nv"&gt;QUERY_RUNNERS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;redash.query_runner.athena&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.big_query&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.google_spreadsheets&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.graphite&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.mongodb&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.couchbase&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.mysql&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.pg&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.url&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.influx_db&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.elasticsearch&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.amazon_elasticsearch&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.presto&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.databricks&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.hive_ds&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.impala_ds&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.vertica&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.clickhouse&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.yandex_metrica&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.rockset&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.treasuredata&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.sqlite&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.dynamodb_sql&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.mssql&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.memsql_ds&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.mapd&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.jql&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.google_analytics&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.axibase_tsd&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.salesforce&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.query_results&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.prometheus&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.qubole&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.db2&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.druid&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.kylin&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.drill&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.uptycs&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.snowflake&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;redash.query_runner.phoenix&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;REFERRER_POLICY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; strict-origin-when-cross-origin
&lt;span class="nv"&gt;INVITATION_TOKEN_MAX_AGE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;604800&lt;/span&gt;
&lt;span class="nv"&gt;CONTENT_SECURITY_POLICY_NONCE_IN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[]&lt;/span&gt;
&lt;span class="nv"&gt;HSTS_INCLUDE_SUBDOMAINS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; False
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;创建数据库&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;bin/run ./manage.py database create_tables
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;在创建数据库的时候,如果有异常,请检查数据库的配置.配置类似:&lt;code&gt;export SQLALCHEMY_DATABASE_URI=postgresql://postgres@XX.XX.XX.XX:15432/postgre&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;服务启动&lt;/h3&gt;
&lt;p&gt;Redash主要的进程有2个&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;web server&lt;/li&gt;
&lt;li&gt;Celery worker(s) &amp;amp; Scheduler&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在开发环境中,我们也可以运行Webpack's dev server or watch utiliy, 命令如下:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Web server: &lt;code&gt;bin/run ./manage.py runserver --debugger --reload&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Celery: &lt;code&gt;./bin/run celery worker --app=redash.worker --beat --Qscheduled_queries,queries,celery -c2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Webpack dev server: &lt;code&gt;npm run start&lt;/code&gt;
如果一切服务运行正常,可访问页面&lt;a href="http://127.0.0.1:5000"&gt;http://127.0.0.1:5000&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;与Auth集成&lt;/h1&gt;
&lt;p&gt;Redash本身支持smal协议,也可以使用GOOGLE账号进行登录,使用google账号登录的时候,后跳使用的就是Oauth协议.我们这里介绍使用OAuth2与自己的认证集成的过程.&lt;/p&gt;
&lt;h2&gt;创建.env文件&lt;/h2&gt;
&lt;p&gt;创建.env文件,填写需要使用的参数,例如:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;REDASH_YOUR_CLIENT_ID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;qloud10070901oauth21
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;REDASH_YOUR_CLIENT_SECRET&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;OUO10070901JN32rewffFE3
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;REDASH_YOUR_ACCESS_TOKEN_URL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;https://yourauthn.com/oauth2.0/accessToken
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;REDASH_YOUR_AUTHORIZE_URL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;https://yourauthn.com/oauth2.0/authorize
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;REDASH_YOUR_BASE_URL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;https://yourauthn.com
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;REDASH_YOUR_PROFILE_URL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;https://yourauthn.com/oauth2.0/profile?access_token&lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;REDASH_YOUR_LOGOUT_URL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;https://yourauthn.com/logout?service&lt;span class="o"&gt;=&lt;/span&gt;

&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;REDASH_YOUR_USERS_URL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;http://qmsauthz.pditdop.service.sd/users
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;REDASH_YOUR_AUTH_DOMAIN&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;redash.com
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;REDASH_YOUR_AUTH_DOMAIN_CHECK&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;True
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;REDASH_YOUR_AUTH_STOMP_ADDRESS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;qloudstomp.service.sd
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;REDASH_YOUR_AUTH_STOMP_PORT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;61613&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;获取设置的环境变量值&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;QLOUD_CLIENT_ID&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;REDASH_YOUR_CLIENT_ID&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;QLOUD_CLIENT_SECRET&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;REDASH_YOUR_CLIENT_SECRET&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;QLOUD_ACCESS_TOKEN_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;REDASH_YOUR_ACCESS_TOKEN_URL&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;QLOUD_AUTHORIZE_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;REDASH_YOUR_AUTHORIZE_URL&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;QLOUD_BASE_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;REDASH_YOUR_BASE_URL&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;QLOUD_PROFILE_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;REDASH_YOUR_PROFILE_URL&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;QLOUD_LOGOUT_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;REDASH_YOUR_LOGOUT_URL&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;QLOUD_USERS_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;REDASH_YOUR_USERS_URL&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;QLOUD_AUTH_DOMAIN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;REDASH_YOUR_AUTH_DOMAIN&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;,&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;QLOUD_AUTH_DOMAIN_CHECK&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;TRUE&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;REDASH_YOUR_AUTH_DOMAIN_CHECK&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;span class="n"&gt;QLOUD_AUTH_STOMP_ADDRESS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;REDASH_YOUR_AUTH_STOMP_ADDRESS&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;QLOUD_AUTH_STOMP_PORT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;REDASH_YOUR_AUTH_STOMP_PORT&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;61613&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;QLOUD_OAUTH_ENABLED&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;bool&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;QLOUD_CLIENT_ID&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;QLOUD_CLIENT_SECRET&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;添加认证代码&lt;/h2&gt;
&lt;p&gt;redash的认证相关的代码都是在redash.authentication目录下,我们创建一个自己的认证文件your_oauth.py&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;logging&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;ssl&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;requests&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;flask&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;redirect&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url_for&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Blueprint&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;flash&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;session&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;flask_oauthlib.client&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;OAuth&lt;/span&gt;

&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;redash&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;redash.authentication&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;create_and_login_user&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;logout_and_redirect_to_index&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;get_next_path&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;redash.authentication.org_resolving&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;current_org&lt;/span&gt;

&lt;span class="n"&gt;logger&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getLogger&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;qloud_oauth&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;oauth&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;OAuth&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;blueprint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Blueprint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;qloud_oauth&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ssl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_create_default_https_context&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ssl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_create_unverified_context&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;qloud_remote_app&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;qloud&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;oauth&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;remote_apps&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;oauth&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;remote_app&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;qloud&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                         &lt;span class="n"&gt;base_url&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_BASE_URL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                         &lt;span class="n"&gt;authorize_url&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_AUTHORIZE_URL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                         &lt;span class="n"&gt;request_token_url&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                         &lt;span class="n"&gt;request_token_params&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
                             &lt;span class="s1"&gt;&amp;#39;scope&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt; &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt; &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;
                                      &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_AUTHORIZE_URL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_ACCESS_TOKEN_URL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                       &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_PROFILE_URL&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                         &lt;span class="p"&gt;},&lt;/span&gt;
                         &lt;span class="n"&gt;access_token_url&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_ACCESS_TOKEN_URL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                         &lt;span class="n"&gt;access_token_params&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
                             &lt;span class="s1"&gt;&amp;#39;client_id&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_CLIENT_ID&lt;/span&gt;
                         &lt;span class="p"&gt;},&lt;/span&gt;
                         &lt;span class="n"&gt;access_token_method&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;GET&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                         &lt;span class="n"&gt;consumer_key&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_CLIENT_ID&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                         &lt;span class="n"&gt;consumer_secret&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_CLIENT_SECRET&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;oauth&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;qloud&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_user_profile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;access_token&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c1"&gt;# headers = {&amp;#39;Authorization&amp;#39;: &amp;#39;OAuth {}&amp;#39;.format(access_token)}&lt;/span&gt;
    &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;access token is &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;access_token&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# logger.info(&amp;#39;header is %s&amp;#39;, headers)&lt;/span&gt;
    &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;requst url is &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_PROFILE_URL&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;access_token&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="n"&gt;response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_PROFILE_URL&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;access_token&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{},&lt;/span&gt; &lt;span class="n"&gt;verify&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;status_code&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;401&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;warning&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Failed getting user profile (response code 401).&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="p"&gt;()[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;attributes&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;verify_profile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;profile&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_public&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_AUTH_DOMAIN_CHECK&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;all user will sync&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;

    &lt;span class="n"&gt;email&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;profile&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;email&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;domain&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;email&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;@&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;domain is &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;domain&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_AUTH_DOMAIN_CHECK&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;domain&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_AUTH_DOMAIN&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;


&lt;span class="nd"&gt;@blueprint.route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/&amp;lt;org_slug&amp;gt;/oauth/qloud&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;endpoint&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;authorize_org&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;org_login&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;org_slug&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;org_slug&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;current_org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;slug&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redirect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url_for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;.authorize&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;next&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;


&lt;span class="nd"&gt;@blueprint.route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/oauth/qloud&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;endpoint&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;authorize&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;login&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;callback&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;url_for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;.callback&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;_external&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;next_path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;next&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url_for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;redash.index&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;org_slug&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;org_slug&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
    &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Callback url: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;callback&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Next is: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;next_path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;qloud_remote_app&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;authorize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;callback&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;callback&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;next_path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="nd"&gt;@blueprint.route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/oauth/qloud_callback&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;endpoint&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;callback&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;authorized&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;resp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;qloud_remote_app&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;authorized_response&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;access_token&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;access_token&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;access_token&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;warning&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Access token missing in call back request.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;flash&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Validation error. Please retry.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redirect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url_for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;redash.login&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="n"&gt;profile&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_user_profile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;access_token&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;profile&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;profile&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;flash&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Validation error. Please retry.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redirect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url_for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;redash.login&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;user profile is &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;profile&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# id  mapping to name&lt;/span&gt;
    &lt;span class="n"&gt;user_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;profile&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;org_slug&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;org&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Organization&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_by_slug&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;org_slug&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;org&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;current_org&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;verify_profile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;profile&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;warning&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;User tried to login with unauthorized domain name: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; (org: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;profile&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;email&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;flash&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Your Qloud Apps account ({}) isn&amp;#39;t allowed.&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;profile&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;email&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
        &lt;span class="c1"&gt;# check failed, please logout&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redirect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url_for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;redash.logout&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;org_slug&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;slug&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;profile&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;photo&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;picture_url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;?sz=40&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;profile&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;photo&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;picture_url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;
    &lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;create_and_login_user&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;user_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;profile&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;email&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;picture_url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;logout_and_redirect_to_index&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="n"&gt;unsafe_next_path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;state&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;url_for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;redash.index&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;org_slug&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;slug&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;next_path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_next_path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;unsafe_next_path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redirect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;next_path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;修改login,登录跳转到自己的登录页面&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_qloud_auth_url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;next_path&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MULTI_ORG&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;qloud_auth_url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;url_for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;qloud_oauth.authorize_org&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;next_path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;org_slug&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;current_org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;slug&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;qloud_auth_url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;url_for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;qloud_oauth.authorize&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;next_path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;qloud_auth_url&lt;/span&gt;

&lt;span class="c1"&gt;# 修改方法def login(org_slug=None),添加如下代码&lt;/span&gt;

&lt;span class="n"&gt;qloud_auth_url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_qloud_auth_url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;next_path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_OAUTH_ENABLED&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;redirect to qloud auth &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;qloud_auth_url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redirect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;qloud_auth_url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;修改登录函数,实现sso登出&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@routes.route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;org_scoped_rule&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/logout&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;logout&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;org_slug&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_OAUTH_ENABLED&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;redirect to qloud auth&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;logout url &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_LOGOUT_URL&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;get_login_url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;host_url&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;/qloud-auth/logout&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt;
        &lt;span class="n"&gt;logout_user&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_LOGOUT_URL&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;host_url&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;qloud-auth/logout&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redirect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QLOUD_LOGOUT_URL&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;host_url&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;qloud-auth/logout&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;logout_user&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redirect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;get_login_url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;redash默认的用户登录信息是在客户端的cookie中存储的,无法实现从sso登出之后,实现redash登录,如果需要实现的话,应该修改redsh的session存储
在SSO登出的时候,通知redash在Server端删除session.等下次客户端访问的时候,进行cookie的删除.具体做法如下:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#在app.py中,导入flask_session&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;flask_session&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Session&lt;/span&gt;

&lt;span class="c1"&gt;#在create_app方法中添加如下代码&lt;/span&gt;

&lt;span class="c1"&gt;# set session in redis&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;SECRET_KEY&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SECRET_KEY&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;SESSION_TYPE&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;redis&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;SESSION_KEY_PREFIX&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;redash-session:&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;SESSION_REDIS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;redis_connection&lt;/span&gt;
&lt;span class="n"&gt;Session&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;在SSO回调的方法中,删除用户session&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#该方法为sso的回调方法&lt;/span&gt;
&lt;span class="nd"&gt;@routes.route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;org_scoped_rule&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/qloud-auth/logout&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;methods&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;GET&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;POST&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;qloud_auth_logout&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;org_slug&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;POST&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;begin to qloud-auth logout with post&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;request_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;form&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;logoutRequest&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;request data is &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;request_data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;tree&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;et&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fromstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request_data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;user_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tree&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;
            &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;user_name &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;user_name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

            &lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;User&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_by_name_and_org&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;current_org&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;user_id &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;__delete_server_session&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;NoResultFound&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;do not found user with request body &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;request_data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;begin to qloud-auth logout with get&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;logout_user&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redirect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;get_login_url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__delete_server_session&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;keys&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;redis_connection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;keys&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;redash-session:*&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;keys&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;redis_connection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;session value is &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;V&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;-&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;redis_connection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;delete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;在loader_user的时候,进行session查询和判断,没有找到session,通知客户端,删除cookie&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__check_server_session&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user_id_with_identity&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;keys&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;redis_connection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;keys&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;redash-session:*&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;keys&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;redis_connection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;session value is &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;user_id_with_identity&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;

&lt;span class="nd"&gt;@login_manager.user_loader&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;load_user&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user_id_with_identity&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;org&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;current_org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_get_current_object&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="sd"&gt;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span class="sd"&gt;    Users who logged in prior to https://github.com/getredash/redash/pull/3174 going live are going&lt;/span&gt;
&lt;span class="sd"&gt;    to have their (integer) user_id as their session user identifier.&lt;/span&gt;
&lt;span class="sd"&gt;    These session user identifiers will be updated the first time they visit any page so we add special&lt;/span&gt;
&lt;span class="sd"&gt;    logic to allow a frictionless transition.&lt;/span&gt;
&lt;span class="sd"&gt;    This logic will be removed 2-4 weeks after going live, and users who haven&amp;#39;t&lt;/span&gt;
&lt;span class="sd"&gt;    visited any page during that time will simply have to log in again.&lt;/span&gt;
&lt;span class="sd"&gt;    &amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;session is &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;is_legacy_session_identifier is &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;user_id_with_identity&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;is_legacy_session_identifier&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user_id_with_identity&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;-&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;is_legacy_session_identifier&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;user_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;user_id_with_identity&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;_&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;user_id_with_identity&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;User&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_by_id_and_org&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_disabled&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;is_legacy_session_identifier&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;login_user&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;remember&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_id&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="n"&gt;user_id_with_identity&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;
        &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;__check_server_session&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user_id_with_identity&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="c1"&gt;# if server session dose not exist,note client to delete cookie&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;user_id&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;user_id&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;_fresh&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;_fresh&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

            &lt;span class="n"&gt;cookie_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;current_app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;REMEMBER_COOKIE_NAME&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;remember_token&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;cookie_name&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cookies&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;remember&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;clear&amp;#39;&lt;/span&gt;

            &lt;span class="n"&gt;user_logged_out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;current_app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_get_current_object&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;
    &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;NoResultFound&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;&lt;/h2&gt;
&lt;h1&gt;参考&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://redash.io/"&gt;https://redash.io/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://redash.io/help/open-source/dev-guide/setup"&gt;https://redash.io/help/open-source/dev-guide/setup&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://redash.io/help/open-source/dev-guide/docker"&gt;https://redash.io/help/open-source/dev-guide/docker&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.jianshu.com/p/9e91aa8782da"&gt;https://www.jianshu.com/p/9e91aa8782da&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/getredash/redash"&gt;https://github.com/getredash/redash&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Redash"></category></entry><entry><title>Kylo的安装</title><link href="xixuebin.github.io/2019-04-10-142510-ch.html" rel="alternate"></link><published>2019-04-10T14:25:10+08:00</published><updated>2019-04-10T14:25:10+08:00</updated><author><name>kevin.xi</name></author><id>tag:None,2019-04-10:xixuebin.github.io/2019-04-10-142510-ch.html</id><summary type="html">&lt;p&gt;Summary&lt;/p&gt;</summary><content type="html">&lt;hr&gt;
&lt;!-- https://code.visualstudio.com/docs/editor/userdefinedsnippets --&gt;

&lt;h1&gt;Kylo介绍&lt;/h1&gt;
&lt;p&gt;Kylo是一个基于Apache Hadoop和Apache Spark构建的功能丰富的数据湖平台.它提供了完整的数据湖解决方案,支持自动发数据摄取,数据准备和数据发现.它集成了有关元数据的捕获,安全和数据质量的最佳实践,包含和许多用Apache Spark和Apache hive进行数据湖操作的例子.&lt;/p&gt;
&lt;p&gt;另外Kylo还提供了灵活的数据处理框架(基于Apache NIFI),用于构建批处理或者流处理管道模板,以及在不影响数据治理要求的情况下实现自动服务功能.Kylo有一个集成的元数据服务器,目前与Mysql和Postgres等数据库兼容.此外Kylo可以与Apache Ranger或Sentry以及CDH Navigator或Ambari集成，以进行集群监控。&lt;/p&gt;
&lt;p&gt;Kylo的Web应用程序层提供面向业务用户的功能，包括数据分析师，数据管理员，数据科学家和IT运营人员。它利用Apache NiFi作为其调度程序和编排引擎，为设计具有200个处理器（数据连接器和转换）的新类型管道提供集成框架。&lt;/p&gt;
&lt;h1&gt;安装&lt;/h1&gt;
&lt;h2&gt;Prerequisites&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Install MySQL (password: hadoop)&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get install mysql-server OR apt-get install mariadb-server &lt;span class="o"&gt;(&lt;/span&gt;recommand&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Ensure that “/opt/” has root privileges.&lt;/li&gt;
&lt;li&gt;Download Java8 and extract to /opt/java8.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;tar -xvf jdk-8u92-linux-x64.tar.gz
mv jdk1.8.0_92 java8
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Download Scala and extract data into /opt/scala2.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;tar -xvf scala-2.12.2.tgz
mv scala-2.12.2 scala2
&lt;span class="c1"&gt;#wget https://downloads.lightbend.com/scala/2.12.2/scala-2.12.2.tgz -P /opt/&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Download Spark2 and extract data into /opt/spark2&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#wget http://d3kbcqa49mib13.cloudfront.net/spark-2.1.0-bin-hadoop2.7.tgz -P /opt/&lt;/span&gt;
tar -xvf spark-2.1.0-bin-hadoop2.7.tgz
mv spark-2.1.0-bin-hadoop2.7 spark2
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Download Maven3 using binary and extract data into /opt/maven3&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# wget http://mirror.fibergrid.in/apache/maven/maven-3/3.5.0/binaries/apache-maven-3.5.0-bin.tar.gz -P /opt/&lt;/span&gt;
tar -xvf apache-maven-3.5.0-bin.tar.gz
mv apache-maven-3.5.0 maven3
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Set environment variables in ~/.bashrc &amp;amp; “/etc/profile (for all users)” file.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;JAVA_HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/opt/java8
&lt;span class="nv"&gt;JRE_HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/opt/java8/jre
&lt;span class="nv"&gt;SCALA_HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/opt/scala2
&lt;span class="nv"&gt;SPARK_HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/opt/spark2
&lt;span class="nv"&gt;MAVEN_HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/opt/maven3
&lt;span class="nv"&gt;M2_HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/opt/maven3
&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$PATH&lt;/span&gt;:&lt;span class="nv"&gt;$JAVA_HOME&lt;/span&gt;/bin:&lt;span class="nv"&gt;$JRE_HOME&lt;/span&gt;/bin:&lt;span class="nv"&gt;$MAVEN_HOME&lt;/span&gt;/bin$:&lt;span class="nv"&gt;$M2_HOME&lt;/span&gt;/bin:&lt;span class="nv"&gt;$SCALA_HOME&lt;/span&gt;/bin:&lt;span class="nv"&gt;$SPARK_HOME&lt;/span&gt;/bin
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Test Configuration&lt;/h2&gt;
&lt;h2&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.treselle.com/blog/kylo-setup-for-data-lake-management/"&gt;Kylo的安装&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="bigdata"></category><category term="kylo"></category></entry><entry><title>数据湖</title><link href="xixuebin.github.io/2019-04-02-183955-ch.html" rel="alternate"></link><published>2019-04-02T18:39:55+08:00</published><updated>2019-04-02T18:39:55+08:00</updated><author><name>kevin.xi</name></author><id>tag:None,2019-04-02:xixuebin.github.io/2019-04-02-183955-ch.html</id><summary type="html">&lt;p&gt;Summary&lt;/p&gt;</summary><content type="html">&lt;hr&gt;
&lt;!-- https://code.visualstudio.com/docs/editor/userdefinedsnippets --&gt;

&lt;h1&gt;什么是数据湖&lt;/h1&gt;
&lt;p&gt;数据库是一个集中式数据存储库,允许你以任意规模存储所有结构化好非结构化数据.你可以按原样存储数据(无需先对数据进行结构化处理),并运行不同类型的分析.从数据可视化到数据分析,机器学习等等.&lt;/p&gt;
&lt;h1&gt;为什么需要数据湖&lt;/h1&gt;
&lt;h1&gt;数据仓库架构&lt;/h1&gt;
&lt;p&gt;数据仓库是一种体系结构,而不是一种技术,数据仓库最为核心的内容分为2类&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基于关系数据库的多维模型&lt;/li&gt;
&lt;li&gt;基于数据立方体的OLAP查询&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="2019-04-02-19-13-13" src="http://xixuebin-blog-images.oss-cn-beijing.aliyuncs.com/xixuebin-blog-images.oss-cn-beijing.aliyuncs.com/images/e7ebfe5f5621fdd149bcd0b3e2b65674.png"&gt;&lt;/p&gt;
&lt;p&gt;数据仓库体系结构中包含了从外部数据源或者数据库中抽取数据的ETL工具.ETL工具还负责数据的转换,清洗,然后加载到数据仓库的存储中.一般来说,数据都会加载到存取速度较慢的存储中,以元数据的方式保存下来.&lt;/p&gt;
&lt;p&gt;为了提高查询效率,原始数据会按主题分类,以聚合的方式存到数据集市中,称之为数据聚合.&lt;/p&gt;
&lt;p&gt;原始数据往往有多条聚合路径,时间维度是一个最基本的内置聚合路径,行政级别划分,产品属性也都是比较常见的聚合路径.&lt;/p&gt;
&lt;p&gt;&lt;img alt="2019-04-02-19-22-48" src="http://xixuebin-blog-images.oss-cn-beijing.aliyuncs.com/xixuebin-blog-images.oss-cn-beijing.aliyuncs.com/images/c28a1170349bc28c3125717fcdccfc1e.png"&gt;&lt;/p&gt;
&lt;p&gt;数据仓库体系中还包括前端查询工具,报表工具和数据挖掘工具,被称为front-end.&lt;/p&gt;
&lt;p&gt;最后数据仓库体系中都包含一个构建数据仓库的元数据仓库.&lt;/p&gt;
&lt;p&gt;元数据仓库包含数据库schema,view用于ETL的metadata,用于数据聚合的metadata,用于报表呈现的metadata和SQL模板等.数据仓库往往采用meta data driver的架构设计,这个元数据仓库至关重要.&lt;/p&gt;
&lt;p&gt;维度是观察事物的角度,也是数据数据库事实表中用来描述数据分类的层次结构.维度在数据中就是表示为列，在SQL中用作过滤和分组。对数据进行多个维度的抽象,并借助数据库的select,group by 等基本操作形成的olap多维数据操作被称为多维数据模型.&lt;/p&gt;
&lt;h1&gt;数据立方体&lt;/h1&gt;
&lt;p&gt;数据立方体只是多维模型的一个说法,立方体只有三维,但是多维模型不仅限于三维模型,可以组合跟多维度的.&lt;/p&gt;
&lt;h1&gt;数据湖和数据仓库对比&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;特性&lt;/th&gt;
&lt;th&gt;数据仓库&lt;/th&gt;
&lt;th&gt;数据湖&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;数据&lt;/td&gt;
&lt;td&gt;来自事务系统、运营数据库和业务线应用程序的关系数据&lt;/td&gt;
&lt;td&gt;来自 IoT 设备、网站、移动应用程序、社交媒体和企业应用程序的非关系和关系数据&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Schema&lt;/td&gt;
&lt;td&gt;设计在数据仓库实施之前（写入型 Schema）&lt;/td&gt;
&lt;td&gt;写入在分析时（读取型 Schema）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;性价比&lt;/td&gt;
&lt;td&gt;更快查询结果会带来较高存储成本&lt;/td&gt;
&lt;td&gt;更快查询结果只需较低存储成本&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;数据质量&lt;/td&gt;
&lt;td&gt;可作为重要事实依据的高度监管数据&lt;/td&gt;
&lt;td&gt;任何可以或无法进行监管的数据（例如原始数据）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;用户&lt;/td&gt;
&lt;td&gt;业务分析师&lt;/td&gt;
&lt;td&gt;数据科学家、数据开发人员和业务分析师（使用监管数据）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;分析&lt;/td&gt;
&lt;td&gt;批处理报告、BI 和可视化&lt;/td&gt;
&lt;td&gt;机器学习、预测分析、数据发现和分析&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;数据湖的特点&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;数据存储 大容量低成本&lt;/li&gt;
&lt;li&gt;数据保真度 数据湖以原始的格式保存数据&lt;/li&gt;
&lt;li&gt;数据使用 数据湖中的数据可以方便的被使用&lt;/li&gt;
&lt;li&gt;延迟绑定 数据湖提供灵活的,面向任务的数据绑定,不需要提前定义数据模型&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;参考&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://cloud.tencent.com/developer/article/1086221"&gt;深度|从数据仓库到数据湖——浅谈数据架构演进&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://hyperj.net/2017/2017-09-06-data-lake-architecture/"&gt;数据湖架构读书笔记&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://aws.amazon.com/cn/big-data/datalakes-and-analytics/what-is-a-data-lake/"&gt;https://aws.amazon.com/cn/big-data/datalakes-and-analytics/what-is-a-data-lake/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="bigdata"></category></entry><entry><title>PostgreSQL Allow Remote Connection</title><link href="xixuebin.github.io/bigdata-postgresql-date-2018-01-17-0938-ch.html" rel="alternate"></link><published>2018-01-17T09:38:53+08:00</published><updated>2018-01-17T09:38:53+08:00</updated><author><name>kevin.xi</name></author><id>tag:None,2018-01-17:xixuebin.github.io/bigdata-postgresql-date-2018-01-17-0938-ch.html</id><summary type="html"></summary><content type="html">&lt;hr&gt;
&lt;h1&gt;PostgreSQL 允许远程机器访问&lt;/h1&gt;
&lt;h2&gt;查看默认配置&lt;/h2&gt;
&lt;p&gt;PostgreSQL 默认的配置绑定的是&lt;code&gt;localhost&lt;/code&gt;, 不允许其他机器链接.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ netstat -nlt
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:443             &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:*               LISTEN
tcp        &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:11211         &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:*               LISTEN
tcp        &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:80              &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:*               LISTEN
tcp        &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:22              &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:*               LISTEN
tcp        &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:5432          &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:*               LISTEN
tcp        &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:3737          &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:*               LISTEN
tcp6       &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; :::22                   :::*                    LISTEN
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;从上图可以看到端口&lt;code&gt;5432&lt;/code&gt;绑定到了&lt;code&gt;127.0.0.1&lt;/code&gt;,意味着任何其他企图从其他机器链接到postgresql server都会被拒绝.
使用telnet链接将产生如下信息:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ telnet &lt;span class="m"&gt;107&lt;/span&gt;.170.11.79 &lt;span class="m"&gt;5432&lt;/span&gt;
Trying &lt;span class="m"&gt;107&lt;/span&gt;.170.11.79...
telnet: connect to address &lt;span class="m"&gt;107&lt;/span&gt;.170.11.79: Connection refused
telnet: Unable to connect to remote host
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;配置postgresql.conf&lt;/h2&gt;
&lt;p&gt;要处理这问题需要修改&lt;code&gt;postgresql.conf&lt;/code&gt;文件.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ find &lt;span class="se"&gt;\ &lt;/span&gt;-name &lt;span class="s2"&gt;&amp;quot;postgresql.conf&amp;quot;&lt;/span&gt;
/var/lib/pgsql/9.4/data/postgresql.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;打开&lt;code&gt;postgresql.conf&lt;/code&gt;,找到并替换&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;listen_addresses&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;替换为&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;listen_addresses&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;重启postgresql server之后查看&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ netstat -nlt
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:11211         &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:*               LISTEN
tcp        &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:80              &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:*               LISTEN
tcp        &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:22              &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:*               LISTEN
tcp        &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:5432            &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:*               LISTEN
tcp        &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:25            &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:*               LISTEN
tcp        &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:2812          &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:*               LISTEN
tcp6       &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; ::1:11211               :::*                    LISTEN
tcp6       &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; :::22                   :::*                    LISTEN
tcp6       &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; :::5432                 :::*                    LISTEN
tcp6       &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; ::1:25                  :::*                    LISTEN
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;可以看到端口&lt;em&gt;5432&lt;/em&gt;的&lt;em&gt;Local Address&lt;/em&gt;已经变成&lt;code&gt;0.0.0.0&lt;/code&gt;,这样就可以从其他机器访问到PostgreSQL的服务器了&lt;/p&gt;</content><category term="bigdata"></category><category term="postgresql"></category></entry><entry><title>大数据资料</title><link href="xixuebin.github.io/bigdata-date-2018-01-04-1617-ch.html" rel="alternate"></link><published>2018-01-04T16:17:53+08:00</published><updated>2018-01-04T16:17:53+08:00</updated><author><name>kevin.xi</name></author><id>tag:None,2018-01-04:xixuebin.github.io/bigdata-date-2018-01-04-1617-ch.html</id><summary type="html"></summary><content type="html">&lt;hr&gt;
&lt;h1&gt;资料&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.hadooptpoint.org/"&gt;http://www.hadooptpoint.org/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://timepasstechies.com/mapreduce-example-get-input-data-external-source-mysql/"&gt;mapreduce example to get input data from external source such as mysql&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://dzone.com/articles/use-cassandra-run-hadoop"&gt;Use Cassandra to Run Hadoop MapReduce&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://www.hadooptpoint.org/multiple-output-files-in-mapreduce-program-using-multipletextoutputformat/#codesyntax_1"&gt;multiple-output-files-in-mapreduce-program-using-multipletextoutputformat&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://blog.ona.io/general/2017/08/30/streaming-ona-data-with-nifi-kafka-druid-and-superset.html"&gt;Streaming Ona Data with NiFi, Kafka, Druid, and Superset&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://docs.hortonworks.com/HDPDocuments/HDF3/HDF-3.0.2/bk_getting-started-with-stream-analytics/content/ch_building-end-to-end-app.html"&gt;getting-started-with-stream-analytics&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://bryanbende.com/development/2016/09/15/apache-nifi-and-apache-kafka"&gt;apache-nifi-and-apache-kafka&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://tsicilian.wordpress.com/2017/07/06/big-data-ingestion-flume-kafka-and-nifi/"&gt;big-data-ingestion-flume-kafka-and-nifi&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://blog.csdn.net/BaiHuaXiu123/article/details/53471645"&gt;一款APP从"想法-开发-上线-产品"的全过程&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://www.cnblogs.com/smartloli/p/5148941.html"&gt;Hadoop - Zeppelin 使用心得&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://www.iteblog.com/archives/1624.html"&gt;专注大数据及应用&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="基于Storm、Esper CEP及Spark构建异常交易行为风险监控系统"&gt;基于Storm、Esper CEP及Spark构建异常交易行为风险监控系统&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</content><category term="bigdata"></category></entry><entry><title>Hadoop mapreduce multiple files</title><link href="xixuebin.github.io/bigdata-mr-date-2018-01-04-1541-ch.html" rel="alternate"></link><published>2018-01-04T15:41:53+08:00</published><updated>2018-01-04T15:41:53+08:00</updated><author><name>kevin.xi</name></author><id>tag:None,2018-01-04:xixuebin.github.io/bigdata-mr-date-2018-01-04-1541-ch.html</id><summary type="html"></summary><content type="html">&lt;hr&gt;
&lt;p&gt;在我们一般的mapreduce程序中,我们只输入一种格式的文件,如果要输入多种问文件格式怎么办呢?&lt;/p&gt;
&lt;h1&gt;MapReduce多文件输入&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;MultipleInputs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addInputPath&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;job&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]),&lt;/span&gt;&lt;span class="n"&gt;TextInputFormat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;CounterMapper&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;MultipleInputs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addInputPath&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;job&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]),&lt;/span&gt;&lt;span class="n"&gt;TextInputFormat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;CountertwoMapper&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="mulit file input" height="100px" src="https://s1.ax1x.com/2018/01/04/piI8Qx.png" width="300px"&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;We use MultipleInputs class which supports MapReduce jobs that have multiple input paths with a different InputFormat and Mapper for each path. To understand the concept more clearly let us take a case where user want to take input from two input files with similar structure.
Also assume that both the input files have 2 columns, first having “Name” and second having “Age”. We want to simply combine the data and sort it by “Name”. What we need to do? Just two things:
Use two mapper classes.
Specify the mapper classes in MultipleInputs class object in run/main method.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Use two mapper classes.&lt;/li&gt;
&lt;li&gt;Specify the mapper classes in MultipleInputs class object in run/main method.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Input Files 1&lt;/h2&gt;
&lt;p&gt;File1.txt&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Aman  &lt;span class="m"&gt;19&lt;/span&gt;
Tom   &lt;span class="m"&gt;20&lt;/span&gt;
Tony  &lt;span class="m"&gt;15&lt;/span&gt;
John  &lt;span class="m"&gt;18&lt;/span&gt;
Johnny      &lt;span class="m"&gt;19&lt;/span&gt;
Hugh  &lt;span class="m"&gt;17&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Input Files 2&lt;/h2&gt;
&lt;p&gt;File2.txt&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;James,21
Punk,21
Frank,20
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;实现Map和Reduce类&lt;/h1&gt;
&lt;h2&gt;Hadoop multiple input files Driver Class&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;com.mcis&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.conf.Configuration&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.conf.Configured&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.fs.Path&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.io.IntWritable&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.io.LongWritable&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.io.Text&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.mapreduce.Job&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.mapreduce.lib.input.MultipleInputs&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.mapreduce.lib.input.TextInputFormat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.mapreduce.lib.output.FileOutputFormat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.util.Tool&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.util.ToolRunner&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MultiInputJob&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Configured&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;Tool&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;run&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Configuration&lt;/span&gt; &lt;span class="n"&gt;conf&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Configuration&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;Job&lt;/span&gt; &lt;span class="n"&gt;job&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Job&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;conf&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;job&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setJarByClass&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MultiInputJob&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;MultipleInputs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addInputPath&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;job&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]),&lt;/span&gt;
                &lt;span class="n"&gt;TextInputFormat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;CounterMapper&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;MultipleInputs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addInputPath&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;job&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]),&lt;/span&gt;
                &lt;span class="n"&gt;TextInputFormat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;CountertwoMapper&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;FileOutputFormat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setOutputPath&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;job&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]));&lt;/span&gt;
        &lt;span class="n"&gt;job&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setReducerClass&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CounterReducer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;job&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setNumReduceTasks&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;job&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setMapOutputKeyClass&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LongWritable&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;job&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setMapOutputValueClass&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Text&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;job&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setOutputKeyClass&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LongWritable&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;job&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setOutputValueClass&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;IntWritable&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;job&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;waitForCompletion&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="n"&gt;ToolRunner&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Configuration&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;MultiInputJob&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Hadoop multiple input files Counter Mapper Class&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;com.mcis&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.io.LongWritable&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.io.Text&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.mapreduce.Mapper&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;CounterMapper&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Mapper&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;LongWritable&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Text&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;LongWritable&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Text&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
 &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;map&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LongWritable&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Text&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Context&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
 &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;InterruptedException&lt;/span&gt;
 &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;trim&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;split&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; 

  &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;write&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;LongWritable&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Long&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseLong&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;])),&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Text&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]));&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Hadoop multiple input files Counter Two Mapper Class&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;com.mcis&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.io.IntWritable&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.io.LongWritable&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.io.Text&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.mapreduce.Mapper&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;CountertwoMapper&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Mapper&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;LongWritable&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Text&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;LongWritable&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Text&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
 &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;map&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LongWritable&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Text&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Context&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
 &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;InterruptedException&lt;/span&gt;
 &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;lines&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;trim&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;split&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;,&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;write&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;LongWritable&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Long&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseLong&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lines&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;])),&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Text&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lines&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]));&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Hadoop multiple input files Counter Reducer Class&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;com.mcis&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.io.IntWritable&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.io.LongWritable&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.io.Text&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.hadoop.mapreduce.Reducer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;CounterReducer&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Reducer&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;LongWritable&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Text&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;LongWritable&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;IntWritable&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;reduce&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LongWritable&lt;/span&gt;  &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Iterable&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Text&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Context&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;InterruptedException&lt;/span&gt;
    &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Text&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
           &lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="o"&gt;++;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;write&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;IntWritable&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Output Files&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;    &lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="m"&gt;17&lt;/span&gt;    &lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="m"&gt;18&lt;/span&gt;    &lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="m"&gt;19&lt;/span&gt;    &lt;span class="m"&gt;2&lt;/span&gt;
&lt;span class="m"&gt;20&lt;/span&gt;    &lt;span class="m"&gt;2&lt;/span&gt;
&lt;span class="m"&gt;21&lt;/span&gt;    &lt;span class="m"&gt;2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;参考&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.hadooptpoint.org/hadoop-multiple-input-files-example-in-mapreduce/#codesyntax_5"&gt;http://www.hadooptpoint.org/hadoop-multiple-input-files-example-in-mapreduce/#codesyntax_5&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="mr"></category><category term="bigdata"></category></entry><entry><title>Parquet文件</title><link href="xixuebin.github.io/bigdata-parquet-date-2017-12-14-1520-ch.html" rel="alternate"></link><published>2017-12-14T15:20:53+08:00</published><updated>2017-12-14T15:20:53+08:00</updated><author><name>kevin.xi</name></author><id>tag:None,2017-12-14:xixuebin.github.io/bigdata-parquet-date-2017-12-14-1520-ch.html</id><summary type="html"></summary><content type="html">&lt;hr&gt;
&lt;h1&gt;Parquet介绍&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;Apache Parquet是Hadoop生态系统圈中一种新型的列式存储格式,可以兼容Hadoop生态圈中大多数计算框架(Hadoop,Spark等),被多种查询引擎(Hive,Impala,Drill等),并且与语言无关.Parquet是面向分析性业务的列式存储格式,由Twriter和Cloudera合作开发,2015年5月从Apache的孵化器里毕业称为Apache的顶级项目.参考资料 &lt;a href="http://parquet.apache.org/documentation/latest/"&gt;Parquet&lt;/a&gt;。
Avro is a row-based storage format for Hadoop. Parquet is a column-based storage format for Hadoop.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;列式存储&lt;/h1&gt;
&lt;p&gt;列式存储的优势:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;可以跳过不符合条件的数据,只读取需要的数据,降低IO数据&lt;/li&gt;
&lt;li&gt;压缩编码可以降低磁盘的存储空间.同一列数据类型是一样的,可以使用更有效的压缩编码,（例如Run Length Encoding和Delta Encoding）进一步节约存储空间。&lt;/li&gt;
&lt;li&gt;只读取需要的列,支持向量运算,能够获取更好的扫描性能&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;项目组成&lt;/h1&gt;
&lt;p&gt;Parquet项目由以下几个子项目组成&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Parquet-format&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;项目由java实现,定义了所有Parquet元数据对象,Parquet的元数据使用Apache Thrift进行序列化并存储在Parquet文件的尾部,该模块实现了读写Parquet文件的功能,并且提供了一些和其他组件适配的工具&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Parquet-compatibility&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;包含不同编程语言之间(JAVA和C/C++)读写文件的测试代码&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Parquet-cpp&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;用于读写Parquet文件的C++库&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;参考资料&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.cloudera.com/documentation/enterprise/5-6-x/topics/cdh_ig_parquet.html#parquet_format"&gt;在Impala,Hive,Pig,HBASE和Mapreduce中使用Parquet&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://blog.csdn.net/yu616568/article/details/50993491"&gt;新一代列式存储格式Parquet&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://blog.csdn.net/sundujing/article/details/51438306"&gt;Spark SQL下的Parquet使用最佳实践和代码实战&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.infoq.com/cn/articles/in-depth-analysis-of-parquet-column-storage-format"&gt;深入分析Parquet列式存储格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="parquet"></category><category term="bigdata"></category></entry><entry><title>Storm介绍(一)</title><link href="xixuebin.github.io/bigdata-storm-date-2017-12-05-1520-ch,%20java.html" rel="alternate"></link><published>2017-12-05T15:20:53+08:00</published><updated>2017-12-05T15:20:53+08:00</updated><author><name>kevin.xi</name></author><id>tag:None,2017-12-05:xixuebin.github.io/bigdata-storm-date-2017-12-05-1520-ch, java.html</id><summary type="html"></summary><content type="html">&lt;hr&gt;
&lt;h1&gt;Storm介绍&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;Storm是一个免费并开源的分布式实时计算系统。利用Storm可以很容易做到可靠地处理无限的数据流，像Hadoop批量处理大数据一样，Storm可以实时处理数据。Storm简单，可以使用任何编程语言。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在Storm之前，进行实时处理是非常痛苦的事情: 需要维护一堆消息队列和消费者，他们构成了非常复杂的图结构。消费者进程从队列里取消息，处理完成后，去更新数据库，或者给其他队列发新消息。&lt;/p&gt;
&lt;p&gt;这样进行实时处理是非常痛苦的。我们主要的时间都花在关注往哪里发消息，从哪里接收消息，消息如何序列化，真正的业务逻辑只占了源代码的一小部分。一个应用程序的逻辑运行在很多worker上，但这些worker需要各自单独部署，还需要部署消息队列。最大问题是系统很脆弱，而且不是容错的：需要自己保证消息队列和worker进程工作正常。&lt;/p&gt;
&lt;p&gt;Storm完整地解决了这些问题。它是为分布式场景而生的，抽象了消息传递，会自动地在集群机器上并发地处理流式计算，让你专注于实时处理的业务逻辑。&lt;/p&gt;
&lt;h1&gt;Storm的特点&lt;/h1&gt;
&lt;p&gt;storm有如下特点:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;编程简单: 开发人员只需要关注应用逻辑，而且跟Hadoop类似，Storm提供的编程原语也很简单&lt;/li&gt;
&lt;li&gt;高性能，低延迟：可以应用于广告搜索引擎这种要求对广告主的操作进行实时响应的场景。&lt;/li&gt;
&lt;li&gt;分布式：可以轻松应对数据量大，单机搞不定的场景&lt;/li&gt;
&lt;li&gt;可扩展：随着业务发展，数据量和计算量越来越大，系统可水平扩展&lt;/li&gt;
&lt;li&gt;容错：单个节点挂了不影响应用&lt;/li&gt;
&lt;li&gt;消息不丢失：保证消息处理&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;注意内容&lt;/h1&gt;
&lt;p&gt;Storm不是一个完整的解决方案,使用storm需要关注几点:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果使用自己的消息队列,需要加入消息队列做数据的来源和产出的代码&lt;/li&gt;
&lt;li&gt;需要考虑如何做故障处理&lt;/li&gt;
&lt;li&gt;需要考虑如何做消息回退&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Storm应用&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;Storm有很多应用：实时分析，在线机器学习(online machine learning)，连续计算(continuous computation)，分布式远程过程调用(RPC)、ETL等。Storm处理速度很快：每个节点每秒钟可以处理超过百万的数据组。它是可扩展(scalable)，容错(fault-tolerant)，保证你的数据会被处理，并且很容易搭建和操作。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;Storm模型&lt;/h1&gt;
&lt;p&gt;Storm实现了一个数据流(data flow)的模型,在这个模型中数据持续不断的流经一个由很多转换实体构成的网络.一个数据流的抽象叫做流(stream),流是无限的元组(Tuple)序列.元组是一个可以表示标准数据类型和用户自定义类型的数据结构,每一个流由唯一的ID来标识.这个ID可以用来构建拓扑中各个组件的数据源.&lt;/p&gt;
&lt;h1&gt;并发模型(worker/executor/task)&lt;/h1&gt;
&lt;p&gt;在一个Storm集群中.Storm主要通过以下三个部件来运行拓扑&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;工作进程(worker processes)&lt;/li&gt;
&lt;li&gt;执行器(executors)&lt;/li&gt;
&lt;li&gt;任务(task)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;work,exexutors,task的相关关系&lt;/p&gt;
&lt;p&gt;&lt;img alt="https://s1.ax1x.com/2017/12/07/TCUEt.png" src="https://s1.ax1x.com/2017/12/07/TCUEt.png"&gt;&lt;/p&gt;
&lt;p&gt;在Worker中运行的是拓扑的一个子集.一个worker进程是从属于某一个特定的拓扑,在一个worker进程中会运行一个或多个与拓扑中组件相关的exector.一个运行中的拓扑就是由这些运行与storm集群的很多机器上的进程组成的.&lt;/p&gt;
&lt;p&gt;一个executor是由worker进成上的一个线程,在executor中可能会有一个或者多个task,这些task都是为同一个组件(spout或者blot)服务的.&lt;/p&gt;
&lt;p&gt;task是实际执行数据处理的最小工作单元(task不是线程).代码中实现的每一个spout或者blot都会在集群中运行很多task.在拓扑的整个生命周期中,每个task的数量保持不变,不过每个组件的executor数量有可能会随着时间变化.在默认情况下task数量和executor的数量是一样的.默认情况下Storm会在一个线程上运行一个task&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;topologyBuilder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setBolt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;green-bolt&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GreenBolt&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
               &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setNumTasks&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
               &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;shuffleGrouping&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;quot;&lt;/span&gt;&lt;span class="n"&gt;blue&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;spout&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;在上面的代码中,我们为&lt;code&gt;GreenBolt&lt;/code&gt;配置了2个初始线程(executor)和4个关联任务(task).这样,每一个执行线程中会运行2个任务.如果在设置blot的时候不指定task数量,那么每个executor和task的数量默认设置为1.&lt;/p&gt;
&lt;h1&gt;参考资料&lt;/h1&gt;
&lt;p&gt;&lt;a href="http://weyo.me/pages/techs/storm-translations-understanding-the-parallelism-of-a-storm-topology/"&gt;Storm 官方文档翻译(6) —— 理解 Storm 拓扑的并行度(parallelism)概念&lt;/a&gt;&lt;/p&gt;</content><category term="storm"></category><category term="bigdata"></category></entry><entry><title>HBase线上问题处理记录</title><link href="xixuebin.github.io/hbase-oldwals-2017-06-27-1027-ch.html" rel="alternate"></link><published>2017-06-27T10:27:02+08:00</published><updated>2017-06-27T10:27:02+08:00</updated><author><name>kevin.xi</name></author><id>tag:None,2017-06-27:xixuebin.github.io/hbase-oldwals-2017-06-27-1027-ch.html</id><summary type="html"></summary><content type="html">&lt;hr&gt;
&lt;h1&gt;HBase线上问题处理记录&lt;/h1&gt;
&lt;h2&gt;Region过多&lt;/h2&gt;
&lt;p&gt;原因&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Region的最大值设置太小&lt;/li&gt;
&lt;li&gt;HBASE升级的时候,配置没有更新&lt;/li&gt;
&lt;li&gt;意外的配置设置&lt;/li&gt;
&lt;li&gt;分裂过多&lt;/li&gt;
&lt;li&gt;预分区不合理&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;HBASE oldWALs目录过大&lt;/h2&gt;
&lt;p&gt;最近升级了线上的hbase集群,一切运行良好.这两天发现集群的oldWALs目录一直在增大,与hbase的官方说法不一致.导致线上集群一直在存储报警&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;dev@ip-10-12-134-13 ~&lt;span class="o"&gt;]&lt;/span&gt;$ hadoop fs -du -h /hbase
&lt;span class="m"&gt;0&lt;/span&gt;        &lt;span class="m"&gt;0&lt;/span&gt;        /hbase/.tmp
&lt;span class="m"&gt;0&lt;/span&gt;        &lt;span class="m"&gt;0&lt;/span&gt;        /hbase/MasterProcWALs
&lt;span class="m"&gt;52&lt;/span&gt;.9 G   &lt;span class="m"&gt;109&lt;/span&gt;.5 G  /hbase/WALs
&lt;span class="m"&gt;103&lt;/span&gt;.6 G  &lt;span class="m"&gt;207&lt;/span&gt;.2 G  /hbase/archive
&lt;span class="m"&gt;0&lt;/span&gt;        &lt;span class="m"&gt;0&lt;/span&gt;        /hbase/corrupt
&lt;span class="m"&gt;56&lt;/span&gt;.2 T   &lt;span class="m"&gt;112&lt;/span&gt;.4 T  /hbase/data
&lt;span class="m"&gt;42&lt;/span&gt;       &lt;span class="m"&gt;126&lt;/span&gt;      /hbase/hbase.id
&lt;span class="m"&gt;7&lt;/span&gt;        &lt;span class="m"&gt;21&lt;/span&gt;       /hbase/hbase.version
&lt;span class="m"&gt;3&lt;/span&gt;.0 T    &lt;span class="m"&gt;5&lt;/span&gt;.9 T    /hbase/oldWALs
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;查询了许多资料,都说跟hbase的replication有关.因为我们确实开启了hbase的replication配置.但是根据replication相关资料我确认replication只跟WALs相关,不应该会影响oldWALs,所以进行了研究.&lt;/p&gt;
&lt;p&gt;经过验证当我关闭掉replication的时候,master会去删除oldWALs目录下的文件.&lt;/p&gt;
&lt;p&gt;但是为了保证线上集群数据的安全,我们必须开启replication,这样oldWALs还是一直会变大.&lt;/p&gt;
&lt;h1&gt;参考&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/mattshma/bigdata/issues/3"&gt;HBase oldWALs 目录过大&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://blog.cloudera.com/blog/2013/10/what-are-hbase-znodes/"&gt;What are HBase znodes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://community.cloudera.com/t5/Storage-Random-Access-HDFS/The-folder-hbase-s-oldWALs-is-so-large-in-CDH5-3-2-amp-CM5-3-2/td-p/35564"&gt;The folder hbase's oldWALs is so large in CDH5.3.2 &amp;amp; CM5.3.2, how to clean?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://talat.uyarer.com/post/113414182956/hbase-oldwals-directory-what-is-it-when-is-it"&gt;Hbase oldWALs directory: what is it, when is it cleaned and who use its ?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="HBASE"></category><category term="BigData"></category></entry></feed>